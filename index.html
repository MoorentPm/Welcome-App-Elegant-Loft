<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome App - Elegant Loft</title>

    <!-- Meta Tag per Anteprime Social (WhatsApp, Facebook, etc.) -->
    <meta property="og:title" content="Benvenuti a Padova - La Vostra Welcome App Digitale">
    <meta property="og:description" content="Tutte le informazioni per il vostro soggiorno: check-in, guide, consigli, coupon e molto altro!">
    <meta property="og:image" content="https://i.imgur.com/A66Wqhb.png">

    <!-- Icona del Sito (Favicon) -->
    <link rel="icon" href="https://i.imgur.com/inHCGjs.png" sizes="32x32" type="image/png">
    <link rel="icon" href="https://i.imgur.com/inHCGjs.png" sizes="192x192" type="image/png">
    <link rel="apple-touch-icon" href="https://i.imgur.com/A66Wqhb.png">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" xintegrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700;800&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <!-- Showdown.js for Markdown to HTML conversion -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/2.1.0/showdown.min.js"></script>
    <!-- Theme Color for Mobile Browsers -->
    <meta name="theme-color" content="#232323">

    <style>
        /* Variabili CSS per il tema scuro */
        :root {
            --primary: #f3dfd9; /* Colore primario (rosa pallido) */
            --primary-dark: #e4c8c0; /* Variante più scura del primario */
            --secondary: #aca5a5; /* Colore secondario (grigio chiaro) */
            --secondary-dark: #938d8d; /* Variante più scura del secondario */
            --accent: #232323; /* Colore di sfondo principale (grigio scuro/nero) */
            --accent-light: #3a3a3a; /* Variante più chiara dello sfondo */
            --accent-lighter: #4f4f4f; /* Variante ancora più chiara dello sfondo */
            --success: #10b981; /* Verde per messaggi di successo */
            --warning: #f59e0b; /* Giallo/Arancio per avvisi */
            --danger: #ef4444; /* Rosso per errori o pericoli */
            --dark: #232323; /* Colore scuro (uguale allo sfondo) */
            --light: #f1f1f1; /* Colore chiaro per testo su sfondo scuro */
            --light-secondary: #b0b0b0; /* Grigio più scuro per testo secondario */
            --white: #ffffff; /* Bianco */
            --nav-height: 65px; /* Altezza della barra di navigazione */
            --focus-ring-color: rgba(243, 223, 217, 0.4); /* Colore per l'outline del focus */
            --border-color-light: rgba(255, 255, 255, 0.1); /* Colore dei bordi chiari */
            --card-shadow: rgba(0, 0, 0, 0.2); /* Ombra delle card */
        }
        /* Stili globali */
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Poppins', sans-serif;
            color: var(--light);
            background-color: var(--accent);
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        /* Stili per i titoli */
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            color: var(--white);
            letter-spacing: -0.02em;
            margin-bottom: 1rem;
        }
        h2 { font-size: 1.8rem; font-weight: 700; }
        h3 { font-size: 1.3rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.75rem; }
        h4 { font-size: 1.1rem; font-weight: 600; }

        /* Container principale */
        .container-lg {
            max-width: 1200px;
            margin-left: auto; margin-right: auto;
            padding-left: 1rem; padding-right: 1rem;
            padding-top: calc(var(--nav-height-actual, var(--nav-height)) + 2rem);
            padding-bottom: 4rem;
            position: relative; z-index: 1;
        }
        @media (min-width: 768px) {
            .container-lg { padding-left: 2rem; padding-right: 2rem; }
        }

        /* Header fisso */
        .fixed-header {
            position: sticky; top: 0;
            z-index: 1000;
            background-color: rgba(35, 35, 35, 0.85);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            border-bottom: 1px solid var(--border-color-light);
            padding: 0 1rem;
            height: var(--nav-height);
            display: flex; align-items: center; justify-content: space-between;
        }
        .header-left { display: flex; align-items: center; gap: 0.75rem; }
        #header-custom-logo { height: 48px; width: auto; display: block; } /* Logo ingrandito */
        #backButton {
            color: var(--light-secondary); font-size: 1.4rem;
            background: none; border: none; cursor: pointer;
            padding: 0.5rem; display: none;
            flex-shrink: 0; margin-left: -0.5rem;
        }
        #backButton:hover { color: var(--white); }
        .header-right { display: flex; align-items: center; }

        /* Selettore lingua */
        .lang-selector { display: flex; align-items: center; gap: 0.5rem; }
        .lang-btn {
            background-color: transparent;
            border: 1px solid var(--secondary); color: var(--secondary);
            padding: 0.2rem 0.5rem; border-radius: 4px;
            font-size: 0.75rem; font-weight: 600; cursor: pointer;
            transition: all 0.2s ease;
        }
        .lang-btn:hover { background-color: var(--accent-light); color: var(--light); border-color: var(--light); }
        .lang-btn.active { background-color: var(--primary); color: var(--dark); border-color: var(--primary); cursor: default; }

        /* Stile Card personalizzato */
        .custom-card {
            background-color: var(--accent-light); color: var(--light);
            border-radius: 1.25rem;
            padding: 2rem;
            box-shadow: 0 8px 25px var(--card-shadow);
            border: 1px solid var(--border-color-light);
            margin-bottom: 2rem;
            transition: transform 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease;
        }
        .custom-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.3);
            background-color: var(--accent-lighter);
        }
        .custom-card h2, .custom-card h3, .custom-card h4 { color: var(--white); }
        .custom-card p, .custom-card li { color: var(--light-secondary); line-height: 1.7; margin-bottom: 1rem; }
        .custom-card p:last-child { margin-bottom: 0; }
        .custom-card strong { color: var(--light); }
        .custom-card img { border-radius: 0.75rem; margin-bottom: 1.5rem; width: 100%; height: auto; max-height: 450px; object-fit: cover; }
        .custom-card ul, .custom-card ol { padding-left: 1.25rem; }
        .custom-card ul li { margin-bottom: 0.75rem; }
        .custom-card ul.styled-list { list-style: none; padding-left: 0; margin-top: 1.5rem; }
        .custom-card ul.styled-list.compact-list li {
            margin-bottom: 0.5rem;
        }
        .custom-card ul.styled-list.emergency-list li {
            margin-bottom: 0.25rem;
        }
        .custom-card ul.styled-list li {
            position: relative; padding-left: 2.2rem;
            margin-bottom: 1rem; font-size: 1rem;
            display: flex; align-items: flex-start; gap: 0.5rem;
        }
        .custom-card ul.styled-list li i {
            flex-shrink: 0; color: var(--primary); font-size: 1rem;
            background-color: rgba(243, 223, 217, 0.1);
            width: 24px; height: 24px; display: inline-flex;
            align-items: center; justify-content: center;
            border-radius: 50%; margin-top: 2px;
        }
        .custom-card ul.styled-list li div { flex-grow: 1; }
        .custom-card ul.styled-list li div h3 { margin-bottom: 0.25rem; font-size: 1.1rem; margin-top: 0; }
        .custom-card ul.styled-list li div p { margin-bottom: 0; line-height: 1.5; }
        .custom-card .border-b { border-color: var(--border-color-light); }
        .custom-card .welcome-icon, .custom-card .info-icon { color: var(--primary); margin-right: 0.5rem; font-size: 1.1em; }
        .tourist-tax-emphasis { color: var(--primary); font-weight: 600; }
        .penalty-info { font-size: 0.85em; color: var(--secondary); display: block; margin-top: 0.25rem; }

        /* Stile Pulsanti */
        .btn {
            display: inline-flex; align-items: center; justify-content: center;
            gap: 0.6rem;
            padding: 0.8rem 2rem;
            border-radius: 999px;
            font-weight: 600; font-family: 'Poppins', sans-serif;
            text-align: center; text-decoration: none;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            cursor: pointer; border: none;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            font-size: 0.9rem; line-height: 1.2;
        }
        .btn:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 7px 20px rgba(0, 0, 0, 0.3);
        }
        .btn:active {
            transform: translateY(-1px) scale(0.98);
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        }
        .btn:focus {
            outline: none;
            box-shadow: 0 0 0 4px var(--focus-ring-color);
        }
        .btn[disabled] { opacity: 0.5; cursor: not-allowed; pointer-events: none; box-shadow: none; transform: none; }
        .btn-primary { background: var(--primary); color: var(--dark); }
        .btn-primary:hover { background: var(--primary-dark); }
        .btn-accent { background: var(--primary); color: var(--dark); }
        .btn-accent:hover { background: var(--primary-dark); }
        .btn-secondary { background: var(--secondary); color: var(--dark); }
        .btn-secondary:hover { background: var(--secondary-dark); }
        .btn-success { background-color: #10b981; color: var(--white); }
        .btn-success:hover { filter: brightness(90%); }
        .btn-sm { padding: 0.5rem 1.2rem; font-size: 0.8rem; }
        .btn-map { background-color: #4CAF50; color: white; }
        .btn-map:hover { background-color: #45a049; }
        .btn-info { background-color: #2196F3; color: white; }
        .btn-info:hover { background-color: #1e88e5; }
        .btn-download { background-color: #FFC107; color: var(--dark); }
        .btn-download:hover { background-color: #ffb300; }
        .btn-video { background-color: var(--danger); color: white; }
        .btn-video:hover { background-color: #d32f2f; }

        /* Pulsanti a Icona (Home Page) */
        .icon-button-wrapper {
            background-color: var(--accent-light);
            border-radius: 1.25rem; padding: 1.5rem;
            box-shadow: 0 8px 25px var(--card-shadow);
            border: 1px solid var(--border-color-light);
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease;
            aspect-ratio: 1 / 1;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            text-decoration: none; color: var(--light);
        }
        .icon-button-wrapper:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.4);
            background-color: var(--accent-lighter);
        }
        .icon-button-wrapper i {
            font-size: 2.2rem; color: var(--primary);
            margin-bottom: 0.75rem; transition: color 0.3s ease;
        }
        .icon-button-wrapper span {
            font-family: 'Montserrat', sans-serif; font-size: 0.8rem;
            font-weight: 600; color: var(--light); line-height: 1.3;
        }
        .icon-button-wrapper:hover i { color: var(--primary-dark); }

        /* Box Video Tutorial (Check-in) */
        .video-tutorial-box {
            background-color: var(--accent-lighter);
            border: 1px solid var(--border-color-light);
            border-radius: 1rem; padding: 1.5rem;
            margin-bottom: 2rem; text-align: center;
        }
        .video-tutorial-box h3 { margin-top: 0; margin-bottom: 1rem; font-size: 1.4rem; }

        /* Indicatore Step (Check-in) */
        .step-indicator {
            display: flex; justify-content: center; align-items: center;
            gap: 0.5rem; margin-bottom: 1.5rem;
        }
        .step-dot {
            width: 10px; height: 10px; border-radius: 50%;
            background-color: var(--secondary); transition: all 0.3s ease;
        }
        .step-dot.active { background-color: var(--primary); transform: scale(1.2); }

        /* Contenitore Step (Check-in) */
        #checkin-steps-container {
            position: relative; overflow: hidden;
            min-height: 400px;
            margin-bottom: 1.5rem;
        }
        .step-content {
            display: none;
            animation: stepFadeIn 0.4s ease forwards;
            position: absolute; top: 0; left: 0; width: 100%;
            padding: 0 0.5rem;
        }
        .step-content.active { display: block; position: relative; }
        @keyframes stepFadeIn { from { opacity: 0; } to { opacity: 1; } }
        .step-content img { margin-top: 1rem; margin-bottom: 1.5rem; border-radius: 0.5rem; width: 100%; height: auto; max-height: 300px; object-fit: cover; }
        .step-content h3 { color: var(--white); margin-bottom: 0.75rem; margin-top: 0; font-size: 1.6rem; font-weight: 800; font-family: 'Montserrat', sans-serif; text-align: left; }
        .step-content p { color: var(--light-secondary); margin-bottom: 0.5rem; font-size: 1rem; text-align: left; line-height: 1.6; }
        #checkin .custom-card { display: flex; flex-direction: column; }
        #checkin .step-navigation {
            margin-top: auto;
            padding-top: 1.5rem; display: flex; justify-content: space-between;
        }

        /* Placeholder QR Code */
        .qr-placeholder {
            width: 150px; height: 150px; background-color: var(--light);
            display: flex; align-items: center; justify-content: center;
            color: var(--dark); font-size: 0.8rem; font-family: monospace;
            border-radius: 8px; margin: 1rem auto;
            border: 1px solid var(--secondary);
        }

        /* Stile FAQ / Guida alla Casa (Accordion) */
        .faq-item { border-bottom: 1px solid var(--border-color-light); }
        .faq-item:last-child { border-bottom: none; }
        .faq-item summary {
            font-weight: 600; color: var(--light); cursor: pointer;
            padding: 1.25rem 0; list-style: none;
            display: flex; justify-content: space-between; align-items: center;
            transition: color 0.2s ease;
        }
        .faq-item summary:hover { color: var(--primary); }
        .faq-item summary::-webkit-details-marker { display: none; }
        .faq-item summary .summary-icon {
            color: var(--primary);
            margin-right: 0.75rem;
            font-size: 1.1em;
            flex-shrink: 0;
        }
        .faq-item summary .summary-text {
            flex-grow: 1;
        }
        .faq-item summary::after {
            content: '+'; font-size: 1.5rem; font-weight: 300;
            color: var(--secondary); transition: transform 0.3s ease, color 0.2s ease;
            margin-left: 1rem;
        }
        .faq-item[open] summary { color: var(--primary); }
        .faq-item[open] summary::after { content: '−'; transform: rotate(180deg); color: var(--primary); }
        .faq-item div {
            padding: 0.5rem 0 1.5rem 0; color: var(--light-secondary);
            font-size: 0.95rem; line-height: 1.7;
            animation: faqFadeIn 0.4s ease;
        }
        @keyframes faqFadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }
        .faq-item div p { margin-bottom: 0.5rem; }
        .faq-item div p:last-child { margin-bottom: 0; }

        /* Box Messaggi (feedback copia, ecc.) */
        #messageBox {
            position: fixed; bottom: 1.5rem; right: 1.5rem;
            background-color: var(--primary); color: var(--dark);
            padding: 0.8rem 1.5rem; border-radius: 0.75rem;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.25);
            font-size: 0.9rem; font-weight: 500; z-index: 1001;
            opacity: 0; transform: translateY(10px);
            transition: opacity 0.3s ease, transform 0.3s ease, visibility 0s linear 0.3s;
            visibility: hidden;
        }
        #messageBox.show {
            opacity: 1; transform: translateY(0); visibility: visible;
            transition-delay: 0s;
        }
        #messageBox.success { background-color: var(--success); color: var(--white); }

        /* Stile Pagine e Transizioni */
        .page { display: none; }
        .page.active {
            display: block;
            opacity: 0; /* Aggiunto per l'animazione */
            animation: pageSlideFadeIn 0.5s cubic-bezier(0.25, 0.8, 0.25, 1) forwards;
        }
        @keyframes pageSlideFadeIn { 
            from { opacity: 0; transform: translateY(15px); } 
            to { opacity: 1; transform: translateY(0); } 
        }

        /* --- Sezione Regole: Stili Uniformi per Titoli e Icone (CORRETTO) --- */
        #regole .custom-card h3,
        #arrivare_treno .custom-card h3,
        #arrivare_macchina .custom-card h3 {
            display: flex !important;
            align-items: center !important;
            gap: 0.75rem !important;
            font-size: 1.2rem !important;
            font-weight: 700 !important;
            color: var(--white) !important;
            margin-top: 1.75rem !important;
            margin-bottom: 0.75rem !important;
        }
        #regole .custom-card h3:first-of-type,
        #arrivare_treno .custom-card h3:first-of-type,
        #arrivare_macchina .custom-card h3:first-of-type {
            margin-top: 0 !important;
        }
        #regole .custom-card h3 .info-icon,
        #arrivare_treno .custom-card h3 .info-icon,
        #arrivare_macchina .custom-card h3 .info-icon {
             font-size: 1.1em;
             margin-right: 0;
             color: var(--primary);
             flex-shrink: 0;
        }
        #regole .custom-card p,
        #arrivare_treno .custom-card p,
        #arrivare_macchina .custom-card p {
             padding-left: calc(1.1em + 0.75rem);
             margin-bottom: 1.25rem;
        }
        #regole .custom-card p:last-of-type, #regole .custom-card p:has(+ h3),
        #arrivare_treno .custom-card p:last-of-type, #arrivare_treno .custom-card p:has(+ h3),
        #arrivare_macchina .custom-card p:last-of-type, #arrivare_macchina .custom-card p:has(+ h3) {
             margin-bottom: 0;
         }
        /* --- Fine Stili Sezione Regole --- */


        /* Media Queries per Responsive Design */
        @media (max-width: 768px) { /* Tablet e schermi piccoli */
            .container-lg { padding-left: 1rem; padding-right: 1rem; padding-top: calc(var(--nav-height-actual, 60px) + 1rem); padding-bottom: 4rem; }
            .grid { grid-template-columns: repeat(2, 1fr); gap: 1rem; } /* Griglia home 2 colonne */
            .posti-grid { grid-template-columns: 1fr; gap: 1.5rem; } /* Griglia posti 1 colonna */
            .fixed-header { padding: 0 0.5rem; height: 60px; } /* Header più piccolo */
            #header-custom-logo { height: 44px; }
            #backButton { font-size: 1.2rem; padding: 0.4rem; }
            .lang-selector { gap: 0.3rem; }
            .lang-btn { font-size: 0.8rem; padding: 0.2rem 0.5rem; }
            .custom-card { padding: 1.5rem; margin-bottom: 1.5rem; }
            h2 { font-size: 1.6rem; }
            h3 { font-size: 1.2rem; }
            .step-content h3 { font-size: 1.4rem; }
            .step-content p { font-size: 0.9rem; }
            .icon-button-wrapper { padding: 1rem; border-radius: 1rem;}
            .icon-button-wrapper i { font-size: 2.2rem; }
            .icon-button-wrapper span { font-size: 0.8rem; }
            .btn { padding: 0.7rem 1.5rem; font-size: 0.85rem; }
            .btn-sm { padding: 0.4rem 1rem; font-size: 0.75rem;}
            #checkin-steps-container { min-height: 380px; }
            .market-grid { grid-template-columns: 1fr; } /* Griglia market 1 colonna */
        }
        @media (max-width: 480px) { /* Smartphone */
            .container-lg { padding-left: 0.8rem; padding-right: 0.8rem; padding-top: calc(var(--nav-height-actual, 56px) + 0.8rem);}
            .grid { grid-template-columns: repeat(2, 1fr); gap: 0.8rem; } /* Griglia home 2 colonne */
            .custom-card { padding: 1.2rem; }
            .fixed-header { height: 56px; }
            #header-custom-logo { height: 40px; }
            .step-content h3 { font-size: 1.3rem; }
            .icon-button-wrapper { padding: 0.8rem; border-radius: 0.75rem;}
            .icon-button-wrapper i { font-size: 2rem; }
            .icon-button-wrapper span { font-size: 0.75rem; }
            .address-copy-wrapper { flex-wrap: nowrap; justify-content: center; }
        }

        /* Stile Mappa */
        .map-container {
            width: 100%; height: 250px; border-radius: 0.75rem;
            overflow: hidden; /* Nasconde bordi iframe */
            border: 1px solid var(--border-color-light); margin-bottom: 1rem;
        }
        .map-container iframe { width: 100%; height: 100%; border: 0; }
        .address-copy-wrapper { /* Contenitore indirizzo + pulsante copia */
            display: flex; align-items: center; gap: 0.5rem;
            margin-bottom: 1.5rem;
            justify-content: center;
        }

        /* Griglia Market */
        .market-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); /* Griglia responsiva */
            gap: 1.5rem;
        }
        .market-item {
            background-color: var(--accent-lighter); border-radius: 12px;
            padding: 1rem; display: flex; align-items: center; justify-content: space-between;
            border: 1px solid var(--border-color-light);
        }
        .market-item img { height: 28px; margin-bottom: 0.5rem; filter: brightness(1.5); /* Rende i loghi più visibili */ }
        .market-item .market-name { font-weight: 600; color: var(--light); font-family: 'Montserrat', sans-serif; font-size: 0.95rem;}
        .market-item .market-distance { font-size: 0.8rem; color: var(--light-secondary); }
        .market-item .btn-map { flex-shrink: 0; margin-left: 0.5rem; } /* Evita che il pulsante si restringa */

        /* Lista Negozi Specializzati */
        .shop-list { display: flex; flex-direction: column; gap: 1.5rem; }
        .shop-item {
            background-color: var(--accent-lighter); border-radius: 12px;
            overflow: hidden; /* Per angoli arrotondati immagine */
            border: 1px solid var(--border-color-light);
            display: flex; flex-direction: column; /* Immagine sopra, contenuto sotto */
        }
        .shop-item img { width: 100%; height: 140px; object-fit: cover; display: block; flex-shrink: 0;}
        .shop-item .shop-item-content { padding: 1.25rem; flex-grow: 1; display: flex; flex-direction: column;}
        .shop-item h4 { font-weight: 600; font-size: 1.1rem; margin-bottom: 0.25rem; color: var(--white); font-family: 'Montserrat', sans-serif;}
        .shop-item .shop-distance { font-size: 0.8rem; color: var(--light-secondary); margin-bottom: 0.5rem; }
        .shop-item .shop-description { font-size: 0.9rem; margin-bottom: 1rem; color: var(--light-secondary); flex-grow: 1;} /* Occupa spazio verticale */
        .shop-item .btn-map { margin-top: auto; } /* Pulsante in fondo */

        /* Lista Convenzioni */
        .convenzioni-list { display: flex; flex-direction: column; gap: 2rem; }
        .convenzione-layout { display: flex; flex-direction: column; gap: 1.5rem; } /* Layout mobile */
        .convenzione-image img { border-radius: 8px; width: 100%; height: auto; max-height: 200px; object-fit: cover;}
        .convenzione-logo { height: 32px; margin-bottom: 0.75rem; width: auto; filter: brightness(1.5); }
        .convenzione-content h3 { font-weight: 600; font-size: 1.2rem; margin-bottom: 0.5rem; color: var(--white); }
        .convenzione-content p { font-size: 0.95rem; margin-bottom: 0.75rem; color: var(--light-secondary);}
        .convenzione-content .discount { /* Stile sconto */
             color: var(--primary); background: rgba(243, 223, 217, 0.1);
             padding: 0.1rem 0.4rem; border-radius: 4px; font-weight: 600; display: inline-block;
        }
        .convenzione-actions { display: flex; flex-wrap: wrap; gap: 0.75rem; margin-top: 1rem; }
        @media (min-width: 768px) { /* Layout desktop convenzioni */
            .convenzione-layout { flex-direction: row; align-items: center; } /* Immagine a sinistra, testo a destra */
            .convenzione-image { flex-shrink: 0; width: 33%; }
            .convenzione-content { flex-grow: 1; }
        }

        /* Griglia Posti da Visitare */
        .posti-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); /* Griglia responsiva */
            gap: 1.5rem;
        }
        .posto-card { /* Card specifica per i posti */
            display: flex; flex-direction: column; /* Immagine sopra, contenuto sotto */
            background-color: var(--accent-light); border-radius: 1.25rem;
            box-shadow: 0 8px 25px var(--card-shadow);
            border: 1px solid var(--border-color-light); overflow: hidden;
        }
        .posto-card img { width: 100%; height: 180px; object-fit: cover; flex-shrink: 0; }
        .posto-content { display: flex; flex-direction: column; flex-grow: 1; padding: 1.5rem; }
        .posto-content h3 { font-weight: 600; font-size: 1.2rem; margin-bottom: 0.5rem; color: var(--white); }
        .posto-content p { font-size: 0.95rem; margin-bottom: 1rem; flex-grow: 1; min-height: 3.5em; color: var(--light-secondary); } /* Assicura altezza minima descrizione */
        .posto-actions { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: auto; padding-top: 0.5rem; } /* Pulsanti in fondo */

        /* Info Contatti (in fondo alle Regole) */
        .contact-info {
            margin-top: 2rem; padding-top: 1.5rem;
            border-top: 1px solid var(--border-color-light); /* Separatore */
            text-align: center;
        }
        .contact-info p { margin-bottom: 0.5rem; color: var(--light-secondary); }
        .contact-info a { color: var(--primary); text-decoration: none; font-weight: 600; }
        .contact-info a:hover { text-decoration: underline; color: var(--primary-dark); }

        /* --- Stili per le nuove funzionalità Gemini --- */
        .gemini-feature-box {
            background-color: rgba(243, 223, 217, 0.05); /* Usando var(--primary) ma con alpha */
            border: 1px solid rgba(243, 223, 217, 0.2);
            border-radius: 1.25rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        .gemini-feature-box h3 {
            color: var(--primary);
            font-weight: 700;
        }
        /* --- Stili per Input Itinerario (CORRETTO) --- */
        #itinerary-interests, #itinerary-days {
            background-color: var(--accent-lighter) !important;
            color: var(--light) !important;
            border: 1px solid var(--secondary) !important;
        }
        #itinerary-interests::placeholder {
            color: var(--light-secondary) !important;
            opacity: 1;
        }
        #itinerary-result, #daily-tip-container {
            background-color: var(--accent-light);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-top: 1.5rem;
            border: 1px solid var(--border-color-light);
        }
        #itinerary-result h1, #itinerary-result h2, #itinerary-result h3 {
            color: var(--primary);
            margin-top: 1rem;
            margin-bottom: 0.5rem;
        }
        #itinerary-result ul {
            list-style-type: disc;
            padding-left: 1.5rem;
        }
        #itinerary-result p, #itinerary-result li {
             color: var(--light-secondary);
        }
        .loader {
            width: 48px;
            height: 48px;
            border: 5px solid var(--primary);
            border-bottom-color: transparent;
            border-radius: 50%;
            display: inline-block;
            box-sizing: border-box;
            animation: rotation 1s linear infinite;
            margin: 1rem auto;
        }
        @keyframes rotation {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .story-waves-container {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
            overflow: hidden;
            pointer-events: none; /* così non blocca i click */
        }
        .story-waves-bg {
            display: block;
            width: 100%;
            height: 100%;
        }
        /* Stile Footer Fisso */
        .page-footer {
            margin-top: 2rem;
            padding: 1.5rem 1rem;
            border-top: 1px solid var(--border-color-light);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }
        .social-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            width: 100%;
        }
        .social-links a {
            color: var(--light-secondary);
            font-size: 1.5rem;
            transition: color 0.2s ease, transform 0.2s ease;
        }
        .social-links a:hover {
            color: var(--primary);
            transform: scale(1.1);
        }
        .linktree-btn {
            padding: 0.4rem 1rem;
        }
    </style>
</head>

<body class="bg-accent">
    <div class="story-waves-container">
        <canvas class="story-waves-bg" id="storyWavesBg"></canvas>
    </div>
    
    <header class="fixed-header">
        <div class="header-left">
            <button id="backButton" aria-label="Indietro">
                <i class="fas fa-chevron-left"></i>
            </button>
            <img id="header-custom-logo" src="https://i.imgur.com/aazwI7x.png" alt="Logo B&B"
                 onerror="this.onerror=null; this.src='https://placehold.co/100x40/f3dfd9/232323?text=Logo';">
        </div>

        <div class="header-right">
            <div class="lang-selector">
                <button id="lang-it" class="lang-btn" onclick="setLanguage('it')">IT</button>
                <button id="lang-en" class="lang-btn" onclick="setLanguage('en')">EN</button>
            </div>
        </div>
    </header>

    <main class="container-lg">

        <div id="home" class="page active" data-title="Welcome Book">
            <div class="text-center mb-10">
                <h2 class="text-3xl md:text-4xl font-bold text-white mb-3" data-translate-key="home_greeting">CARI OSPITI, Benvenuti!</h2>
                <p class="text-lg text-light-secondary" data-translate-key="home_subtitle">Clicca sulle icone per esplorare</p>
            </div>
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 md:gap-6">
                 <a href="#benvenuto" class="icon-button-wrapper" onclick="event.preventDefault(); showPage('benvenuto')"> <i class="fas fa-home"></i> <span data-translate-key="home_btn_welcome">BENVENUTO</span> </a>
                 <a href="#come_arrivare" class="icon-button-wrapper" onclick="event.preventDefault(); showPage('come_arrivare')"> <i class="fas fa-route"></i> <span data-translate-key="home_btn_directions">COME ARRIVARE</span> </a>
                 <a href="#checkin_checkout_hub" class="icon-button-wrapper" onclick="event.preventDefault(); showPage('checkin_checkout_hub')"> <i class="fas fa-key"></i> <span data-translate-key="home_btn_checkin_out">CHECK-IN / OUT</span> </a>
                 <a href="#wifi" class="icon-button-wrapper" onclick="event.preventDefault(); showPage('wifi')"> <i class="fas fa-wifi"></i> <span data-translate-key="home_btn_wifi">WIFI</span> </a>
                 <a href="#regole" class="icon-button-wrapper" onclick="event.preventDefault(); showPage('regole')"> <i class="fas fa-list-alt"></i> <span data-translate-key="home_btn_rules">REGOLE CASA</span> </a>
                 <a href="#market" class="icon-button-wrapper" onclick="event.preventDefault(); showPage('market')"> <i class="fas fa-store"></i> <span data-translate-key="home_btn_market">MARKET</span> </a>
                 <a href="#convenzioni" class="icon-button-wrapper" onclick="event.preventDefault(); showPage('convenzioni')"> <i class="fas fa-tags"></i> <span data-translate-key="home_btn_deals">CONVENZIONI</span> </a>
                 <a href="#posti" class="icon-button-wrapper" onclick="event.preventDefault(); showPage('posti')"> <i class="fas fa-map-signs"></i> <span data-translate-key="home_btn_places">POSTI DA VISITARE</span> </a>
                 <a href="#guida_casa" class="icon-button-wrapper" onclick="event.preventDefault(); showPage('guida_casa')"> <i class="fas fa-book-open"></i> <span data-translate-key="home_btn_guide">GUIDA ALLA CASA</span> </a>
                 <a href="#arrivederci" class="icon-button-wrapper" onclick="event.preventDefault(); showPage('arrivederci')"> <i class="fas fa-hand-peace"></i> <span data-translate-key="home_btn_goodbye">ARRIVEDERCI</span> </a>
            </div>
        </div>

        <div id="benvenuto" class="page" data-title="Benvenuto">
            <div class="custom-card">
                <h2 data-translate-key="welcome_title_new"><i class="fas fa-party-horn welcome-icon"></i> Benvenuti nel Cuore di Padova: Il Vostro Rifugio Elegante</h2>
                <p data-translate-key="welcome_greeting_new">Gentili ospiti,</p>
                <p data-translate-key="welcome_intro_new">Siamo lieti di darvi il benvenuto nel nostro accogliente alloggio, il luogo ideale per vivere un soggiorno indimenticabile tra arte, storia e comfort nel cuore di Padova.</p>
            </div>
            
            <div class="custom-card gemini-feature-box">
                <h3 data-translate-key="gemini_tip_title">✨ Un Consiglio per Voi</h3>
                <p data-translate-key="gemini_tip_desc">Ogni giorno chiediamo a un esperto locale un suggerimento speciale per la tua giornata a Padova. Scopri quello di oggi!</p>
                <div id="daily-tip-container" class="hidden"></div>
                <div id="daily-tip-loader" class="text-center hidden"><div class="loader"></div></div>
            </div>

            <div class="custom-card">
                <h3 data-translate-key="welcome_subtitle_location"><i class="fas fa-map-marker-alt info-icon"></i> Posizione Strategica</h3>
                <p data-translate-key="welcome_location_desc">Situato a soli 5 minuti a piedi dalla stazione ferroviaria, il nostro loft offre un accesso comodo e veloce, sia che arriviate in treno sia che desideriate esplorare le bellezze della città. In appena 5 minuti a piedi, vi troverete immersi nel centro storico, pronti a scoprire le meraviglie di Padova.</p>
                <div class="mt-8 text-center">
                    <a href="#come_arrivare" class="btn btn-primary" onclick="event.preventDefault(); showPage('come_arrivare')">
                        <i class="fas fa-route"></i> <span data-translate-key="btn_show_directions">Scopri come arrivare</span>
                    </a>
                </div>
            </div>
        </div>


        <div id="checkin_checkout_hub" class="page" data-title="Check-in / Check-out">
             <div class="custom-card text-center max-w-md mx-auto"> <h2 data-translate-key="checkin_hub_title">Check-in & Check-out</h2>
                 <p class="text-light-secondary mb-8" data-translate-key="checkin_hub_prompt">Seleziona l'informazione:</p>
                 <div class="flex flex-col space-y-4"> <a href="#checkin" class="btn btn-primary w-full justify-center" onclick="event.preventDefault(); showPage('checkin')">
                         <i class="fas fa-sign-in-alt"></i><span data-translate-key="checkin_hub_btn_in">Vedi Procedura di Check-in</span>
                    </a>
                    <a href="#checkout" class="btn btn-secondary w-full justify-center" onclick="event.preventDefault(); showPage('checkout')">
                         <i class="fas fa-sign-out-alt"></i><span data-translate-key="checkin_hub_btn_out">Vedi Procedura di Check-out</span>
                    </a>
                 </div>
            </div>
        </div>

        <div id="checkin" class="page" data-title="Procedura Check-in">
            <div class="custom-card">
                 <h2 class="flex justify-between items-center mb-6"> <span data-translate-key="checkin_title">Check-in</span>
                    <span class="text-sm font-normal text-light-secondary" data-translate-key="checkin_time">(Dalle 15:00)</span>
                </h2>

                <div class="video-tutorial-box">
                    <h3 data-translate-key="checkin_video_title">Video Tutorial Check-in</h3>
                    <p class="text-light-secondary mb-4" data-translate-key="checkin_video_desc">Preferisci un video? Guarda il tutorial completo per un check-in facile e veloce.</p>
                    <a href="https://youtu.be/SPO1ag6bz5Q?si=Glac8ZLIkGkb84hW" target="_blank" rel="noopener noreferrer" class="btn btn-video">
                        <i class="fas fa-play-circle"></i> <span data-translate-key="checkin_video_button">Guarda Ora</span>
                    </a>
                </div>

                <div class="step-indicator mt-4 mb-6" id="checkin-step-indicator"></div>
                <div id="checkin-steps-container">
                    <div class="step-content" data-step="1">
                        <h3 data-translate-key="checkin_step1_title_new">STEP 1: Identificazione Facciata</h3>
                        <img src="https://i.postimg.cc/3NQRr03Q/313732403.jpg" alt="Facciata dell'edificio" onerror="this.onerror=null; this.src='https://placehold.co/600x350/cccccc/ffffff?text=Immagine+non+disp.';">
                        <p data-translate-key="checkin_step1_desc_new">Osserva il numero civico 25. Ti aiuterà a riconoscere il nostro spazio.</p>
                    </div>
                    <div class="step-content" data-step="2">
                        <h3 data-translate-key="checkin_step2_title_new">STEP 2: Cassetta Sicurezza</h3>
                        <img src="https://i.postimg.cc/3xtzKM3K/Immagine-Whats-App-2025-07-31-ore-09-55-22-23ca736f.jpg" alt="Cassetta di sicurezza Master Lock" onerror="this.onerror=null; this.src='https://placehold.co/600x350/cccccc/ffffff?text=Immagine+non+disp.';">
                        <p data-translate-key="checkin_step2_desc_new">A destra del cancello, troverai la cassetta Master Lock con le chiavi. <br>Il codice ti verrà fornito dopo l'invio dei documenti.</p>
                    </div>
                    <div class="step-content" data-step="3">
                        <h3 data-translate-key="checkin_step3_title_new">STEP 3: Accesso Portone</h3>
                        <img src="https://i.postimg.cc/j22852cv/313732407.jpg" alt="Portone condominiale" onerror="this.onerror=null; this.src='https://placehold.co/600x350/cccccc/ffffff?text=Immagine+non+disp.';">
                        <p data-translate-key="checkin_step3_desc_new">Usa le chiavi per aprire il cancelletto e poi il portone condominiale.</p>
                    </div>
                    <div class="step-content" data-step="4">
                        <h3 data-translate-key="checkin_step4_title_new">STEP 4: Accesso Primo Piano</h3>
                        <img src="https://i.postimg.cc/dQNHfRQf/313732413.jpg" alt="Scale per il primo piano" onerror="this.onerror=null; this.src='https://placehold.co/600x350/cccccc/ffffff?text=Immagine+non+disp.';">
                        <p data-translate-key="checkin_step4_desc_new">Percorri la breve rampa di scale fino al 1° piano.</p>
                    </div>
                    <div class="step-content" data-step="5">
                        <h3 data-translate-key="checkin_step5_title_new">STEP 5: Porta "Elegant Loft"</h3>
                        <img src="https://i.postimg.cc/gj7g6pBp/313732419.jpg" alt="Porta dell'appartamento Elegant Loft" onerror="this.onerror=null; this.src='https://placehold.co/600x350/cccccc/ffffff?text=Immagine+non+disp.';">
                        <p data-translate-key="checkin_step5_desc_new">Individua la porta con targhetta "Elegant Loft", numero 5.</p>
                    </div>
                    <div class="step-content" data-step="6">
                        <h3 data-translate-key="checkin_step6_title_new">STEP 6: Benvenuti!</h3>
                        <img src="https://a0.muscache.com/im/pictures/hosting/Hosting-U3RheVN1cHBseUxpc3Rpbmc6NDQzMTg5NDU=/original/1fb745cf-85f3-4ad6-a176-9fbe26a6d6de.jpeg?im_w=1200" alt="Ingresso dell'appartamento" onerror="this.onerror=null; this.src='https://placehold.co/600x350/cccccc/ffffff?text=Immagine+non+disp.';">
                        <p data-translate-key="checkin_step6_desc_new">Varcata la soglia, sarai accolto da un'atmosfera calorosa!</p>
                    </div>
                </div>
                <div class="step-navigation">
                    <button class="btn btn-secondary" id="checkin-prev" onclick="navigateCheckinSteps(-1)">
                        <i class="fas fa-arrow-left"></i> <span data-translate-key="btn_previous">Precedente</span>
                    </button>
                    <button class="btn btn-primary" id="checkin-next" onclick="navigateCheckinSteps(1)">
                        <span data-translate-key="btn_next">Successivo</span> <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
        </div>

        <div id="checkout" class="page" data-title="Procedura Check-out">
             <div class="custom-card">
                 <h2 class="flex flex-col sm:flex-row justify-between items-start sm:items-center"> <span data-translate-key="checkout_title_new">Come Effettuare il Check-out</span>
                    <span class="text-sm font-normal text-light-secondary mt-1 sm:mt-0" data-translate-key="checkout_time_new">(Entro le 10:00)</span>
                </h2>
                <p data-translate-key="checkout_intro_new">Per aiutarci a preparare al meglio l'appartamento per i prossimi ospiti, ti chiediamo di seguire queste semplici indicazioni prima di lasciare l'alloggio:</p>
                <ul class="styled-list mt-6">
                    <li><i class="fas fa-shower"></i><div data-translate-key="checkout_item_towels_new"><strong>Radunare gli asciugamani usati:</strong> Per favore, lascia gli asciugamani utilizzati all'interno del lavandino del bagno.</div></li>
                    <li><i class="fas fa-trash-alt"></i><div data-translate-key="checkout_item_trash_new"><strong>Buttare la spazzatura:</strong> Ti chiediamo gentilmente di svuotare i cestini e buttare la spazzatura negli appositi contenitori pubblici all'esterno.</div></li>
                    <li><i class="fas fa-lightbulb"></i><div data-translate-key="checkout_item_power_new"><strong>Spegnere tutto:</strong> Prima di uscire:<br>– Spegni tutte le luci<br>– Porta il condizionatore e i termosifoni a zero<br>– Chiudi lo scuro della porta finestra</div></li>
                    <li><i class="fas fa-key"></i><div data-translate-key="checkout_item_keys_new"><strong>Restituire le chiavi:</strong> Per favore, riponi le chiavi nella cassetta di sicurezza MasterLock esterna, la stessa usata per il check-in.</div></li>
                    <li><i class="fas fa-euro-sign"></i><div class="tourist-tax-emphasis" data-translate-key="checkout_item_tax_new"><strong>Tassa di soggiorno:</strong> Gli ospiti sono gentilmente pregati di lasciare la somma per la tassa di soggiorno sopra il tavolo. 2,50€ per persona per notte, fino ad un massimo di 12,50€ per persona, esclusi i minori di 16 anni.</div></li>
                </ul>
            </div>
        </div>

        <div id="come_arrivare" class="page" data-title="Come Arrivare">
            <div class="custom-card max-w-lg mx-auto">
                <h2 data-translate-key="directions_title" class="text-center">Come Arrivare</h2>
                <div class="address-copy-wrapper">
                    <p id="property-address" class="text-light-secondary font-mono text-sm my-0">Via Trieste, 25, 35121 Padova PD</p>
                    <button onclick="copyToClipboard(document.getElementById('property-address').textContent, this)" class="btn btn-secondary btn-sm py-1 px-2" aria-label="Copia indirizzo">
                        <i class="fas fa-copy m-0"></i> <span class="sr-only" data-translate-key="btn_copy">Copia</span>
                    </button>
                </div>

                <div class="map-container">
                    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2800.584313295243!2d11.88243631555544!3d45.4192609791002!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x477eda5a5a5a5a5b%3A0x4778d1b8a4a5a5a5!2sVia%20Trieste%2C%2025%2C%2035121%20Padova%20PD!5e0!3m2!1sit!2sit!4v1689878456789!5m2!1sit!2sit" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                </div>

                <a href="https://www.google.com/maps/search/?api=1&query=Via+Trieste,+25,+35121+Padova+PD" target="_blank" rel="noopener noreferrer" class="btn btn-map w-full justify-center mb-6">
                    <i class="fas fa-map-marker-alt"></i> <span data-translate-key="directions_hub_btn_map">Apri su Google Maps</span>
                </a>

                <h3 class="text-center" data-translate-key="directions_prompt">Come pensi di raggiungerci?</h3>
                <div class="flex flex-col space-y-4 mt-4">
                    <a href="#arrivare_treno" class="btn btn-primary w-full justify-center" onclick="event.preventDefault(); showPage('arrivare_treno')">
                        <i class="fas fa-train"></i><span data-translate-key="directions_btn_train">In Treno</span>
                    </a>
                    <a href="#arrivare_macchina" class="btn btn-secondary w-full justify-center" onclick="event.preventDefault(); showPage('arrivare_macchina')">
                        <i class="fas fa-car"></i><span data-translate-key="directions_btn_car">In Macchina</span>
                    </a>
                </div>
            </div>
        </div>
        
        <div id="arrivare_treno" class="page" data-title="Arrivo in Treno">
            <div class="custom-card">
                <h2 data-translate-key="train_title">Come Raggiungerci dalla Stazione</h2>
                <p data-translate-key="train_desc" class="mb-6">Il nostro Elegant Loft si trova in una posizione strategica, a pochi minuti a piedi dalla stazione ferroviaria di Padova. Qualunque sia il mezzo con cui viaggi, potrai raggiungerci in modo rapido, semplice e senza stress.</p>
                
                <h3><i class="fas fa-walking info-icon"></i> <span data-translate-key="train_walk_title">A piedi</span></h3>
                <p data-translate-key="train_walk_desc">Se viaggi con bagagli leggeri o preferisci sgranchirti le gambe dopo il viaggio, ti consigliamo una piacevole passeggiata di circa 5 minuti. Uscendo dalla stazione, ti basterà attraversare la strada e proseguire dritto fino a raggiungere Via Trieste 25. È un percorso semplice e diretto, perfetto per iniziare con tranquillità il tuo soggiorno a Padova.</p>
                <a href="https://www.google.com/maps/dir/?api=1&origin=Stazione+di+Padova&destination=Via+Trieste,+25,+35121+Padova+PD&travelmode=walking" target="_blank" rel="noopener noreferrer" class="btn btn-map mt-4">
                    <i class="fas fa-directions"></i> <span data-translate-key="train_btn_route">Vedi Percorso Pedonale</span>
                </a>
                
                <h3 class="mt-8"><i class="fas fa-tram info-icon"></i> <span data-translate-key="train_tram_title">Con il tram</span></h3>
                <p data-translate-key="train_tram_desc">Se hai valigie più pesanti o preferisci un'alternativa ancora più comoda, puoi prendere il tram proprio di fronte all'uscita principale della stazione. Ti basterà salire sul tram in direzione centro e scendere alla fermata "Trieste", che si trova a soli 2 minuti di tragitto. La fermata si trova a 50 metri dalla nostra porta di ingresso – ideale se desideri evitare di camminare troppo con i bagagli.</p>
            </div>
        </div>

        <div id="arrivare_macchina" class="page" data-title="Arrivo in Macchina">
            <div class="custom-card">
                <h2 data-translate-key="car_title">Parcheggio nelle Vicinanze</h2>
                
                <h3><i class="fas fa-road info-icon"></i> <span data-translate-key="car_street_parking_title">Parcheggio in Strada</span></h3>
                <p data-translate-key="car_street_parking_desc">Spesso è possibile trovare posti auto gratuiti direttamente nella via dell'appartamento. Vi suggeriamo di controllare il lato destro della strada: è lì che, più frequentemente, si trovano parcheggi liberi e gratuiti.</p>
                
                <h3 class="mt-8"><i class="fas fa-parking info-icon"></i> <span data-translate-key="car_recommended_parking_title">Parcheggio Consigliato</span></h3>
                <p data-translate-key="car_recommended_parking_desc">Se preferite una soluzione più sicura o se arrivate in orari di punta, vi consigliamo un parcheggio ben posizionato e facilmente accessibile a pochi minuti da noi.</p>
                <a href="https://maps.app.goo.gl/V92Md7rUtNPYYwRb8" target="_blank" rel="noopener noreferrer" class="btn btn-map mt-4">
                    <i class="fas fa-map-marker-alt"></i> <span data-translate-key="car_btn_view_parking">Vedi Parcheggio Consigliato</span>
                </a>
            </div>
        </div>

        <div id="wifi" class="page" data-title="Informazioni WiFi">
            <div class="custom-card text-center max-w-md mx-auto"> <i class="fas fa-wifi text-5xl mb-4 text-primary"></i> <h2 data-translate-key="wifi_title">Informazioni Wi-Fi</h2>
                <div class="mb-4">
                    <p class="font-semibold mb-1 text-light" data-translate-key="wifi_ssid_label">Network (SSID):</p>
                    <p id="wifi-ssid" class="font-mono bg-accent text-light px-4 py-2 rounded-lg inline-block border border-secondary">ElegantLoft WIFI</p>
                </div>
                <div class="mb-6">
                    <p class="font-semibold mb-1 text-light" data-translate-key="wifi_password_label">Password:</p>
                    <p id="wifi-password" class="font-mono bg-accent text-light px-4 py-2 rounded-lg inline-block border border-secondary">Civico25</p>
                       <button id="copy-wifi-btn" onclick="copyToClipboard('Civico25', this)" class="btn btn-secondary btn-sm ml-2 align-baseline">
                           <i class="fas fa-copy"></i> <span data-translate-key="btn_copy">Copia</span>
                       </button>
                </div>
            </div>
        </div>

        <div id="regole" class="page" data-title="Regole della Casa">
            <div class="custom-card">
                <h2 data-translate-key="rules_title">Regole della Casa</h2>
                <p data-translate-key="rules_intro_final">Benvenuti! Per rendere il soggiorno piacevole per tutti, vi chiediamo di rispettare alcune semplici regole durante la vostra permanza.</p>

                <h3><i class="fas fa-paw info-icon"></i> <span data-translate-key="rules_pets_title_new">Animali Domestici</span></h3>
                <p data-translate-key="rules_pets_desc_new">Siamo felici di accogliere anche i vostri amici a quattro zampe!<br>L'appartamento è pet-friendly, ma solo per animali di piccola taglia.</p>

                <h3><i class="fas fa-ban info-icon"></i> <span data-translate-key="rules_parties_title_new">Feste ed Eventi</span></h3>
                <p data-translate-key="rules_parties_desc_new">Non è consentito organizzare feste o eventi all'interno dell'appartamento, nel rispetto del vicinato e della quiete della zona.</p>

                <h3><i class="fas fa-smoking-ban info-icon"></i> <span data-translate-key="rules_smoking_title_new">Fumo</span></h3>
                <p data-translate-key="rules_smoking_desc_new">Per mantenere un ambiente salubre per tutti, vi chiediamo di non fumare all'interno dell'appartamento.</p>

                <h3><i class="fas fa-utensils info-icon"></i> <span data-translate-key="rules_kitchen_title_new">Pulizia della Cucina</span></h3>
                <p data-translate-key="rules_kitchen_desc_new">Al momento del check-out, vi chiediamo gentilmente di lasciare piatti e stoviglie puliti.</p>

                <h3><i class="fas fa-seedling info-icon"></i> <span data-translate-key="rules_sustainability_title_new">Turismo Sostenibile</span></h3>
                <p data-translate-key="rules_sustainability_desc1_new">Aiutaci a proteggere il pianeta!<br>Risparmia energia, evita sprechi d'acqua, spegni le luci e i dispositivi quando non servono.</p>
                <p data-translate-key="rules_sustainability_desc2_new">'SAVE THE PLANET – Aiutaci a risparmiare energia e non sprecarla.'</p>

                <h3><i class="fas fa-volume-mute info-icon"></i> <span data-translate-key="rules_quiet_title_new">Orari del Silenzio</span></h3>
                <p data-translate-key="rules_quiet_desc_new">Ti chiediamo di rispettare la quiete nei seguenti orari:<br>Dalle 22:00 alle 8:00<br>Dalle 13:00 alle 15:00<br>Evita rumori forti e chiudi le porte con delicatezza.</p>

                <h3><i class="fas fa-clock info-icon"></i> <span data-translate-key="rules_checkout_title_new">Check-out</span></h3>
                <p data-translate-key="rules_checkout_desc_new">L'appartamento deve essere lasciato entro le ore 10:00.<br>La tassa di soggiorno va lasciata sul tavolo.<br>L'alloggio è riservato esclusivamente agli ospiti registrati.</p>

                <h3><i class="fas fa-tools info-icon"></i> <span data-translate-key="rules_damage_title_new">Danni</span></h3>
                <p data-translate-key="rules_damage_desc_new">In caso di piccoli incidenti o danneggiamenti, ti chiediamo di informarci.<br>Siamo sempre disponibili per trovare la soluzione migliore.</p>
                
            </div>
        </div>

        <div id="market" class="page" data-title="Market & Negozi">
             <h2 class="text-center mb-8" data-translate-key="market_title">Market & Negozi</h2>
             <div class="custom-card mb-8">
                 <h3 class="border-b border-border-color-light pb-3 mb-6" data-translate-key="market_section_supermarkets">Supermercati Vicini</h3>
                 <div class="market-grid">
                     <div class="market-item">
                         <div>
                             <p class="market-name">Super A&O</p>
                             <p class="market-distance" data-translate-key="market_dist_ao">3 min piedi / 1 min auto</p>
                         </div>
                         <a href="https://maps.google.com/maps?q=Supermercato+A%26O+vicino+Via+Trieste,+25,+Padova" target="_blank" rel="noopener noreferrer" class="btn btn-map btn-sm"><i class="fas fa-map-marker-alt"></i> <span data-translate-key="btn_go">Vai</span></a>
                     </div>
                     <div class="market-item">
                         <div>
                             <p class="market-name">iN's Mercato</p>
                             <p class="market-distance" data-translate-key="market_dist_ins">6 min piedi / 6 min auto</p>
                         </div>
                         <a href="https://maps.google.com/maps?q=iN%27s+mercato+vicino+Via+Trieste,+25,+Padova" target="_blank" rel="noopener noreferrer" class="btn btn-map btn-sm"><i class="fas fa-map-marker-alt"></i> <span data-translate-key="btn_go">Vai</span></a>
                     </div>
                     <div class="market-item">
                         <div>
                             <p class="market-name">Pam Local</p>
                             <p class="market-distance" data-translate-key="market_dist_pam">7 min piedi / 6 min auto</p>
                         </div>
                         <a href="https://maps.google.com/maps?q=Pam+Local+vicino+Via+Trieste,+25,+Padova" target="_blank" rel="noopener noreferrer" class="btn btn-map btn-sm"><i class="fas fa-map-marker-alt"></i> <span data-translate-key="btn_go">Vai</span></a>
                     </div>
                      <div class="market-item">
                         <div>
                             <p class="market-name">Despar Sartori</p>
                             <p class="market-distance" data-translate-key="market_dist_despar">6 min piedi / 7 min auto</p>
                         </div>
                         <a href="https://maps.google.com/maps?q=Despar+Sartori+vicino+Via+Trieste,+25,+Padova" target="_blank" rel="noopener noreferrer" class="btn btn-map btn-sm"><i class="fas fa-map-marker-alt"></i> <span data-translate-key="btn_go">Vai</span></a>
                     </div>
                 </div>
             </div>
             <div class="custom-card">
                 <h3 class="border-b border-border-color-light pb-3 mb-6" data-translate-key="market_section_specialty">Negozi Specializzati</h3>
                 <div class="shop-list">
                     <div class="shop-item">
                         <img src="https://i.imgur.com/wPDVQiv.jpeg" alt="Salumeria al Carmine" onerror="this.onerror=null; this.src='https://placehold.co/600x180/cccccc/ffffff?text=Immagine+non+disp.';">
                         <div class="shop-item-content">
                             <h4 data-translate-key="market_salumeria_name">Salumeria al Carmine</h4>
                             <p class="shop-distance" data-translate-key="market_salumeria_loc">7 min in macchina</p>
                             <p class="shop-description" data-translate-key="market_salumeria_desc">Salumi, formaggi, frutta e verdura fresca.</p>
                             <a href="https://maps.google.com/maps?q=Salumeria+al+Carmine+Padova" target="_blank" rel="noopener noreferrer" class="btn btn-map btn-sm"><i class="fas fa-map-marker-alt"></i> <span data-translate-key="btn_go">Vai</span></a>
                         </div>
                     </div>
                     <div class="shop-item">
                         <img src="https://i.postimg.cc/NLhVJnWR/borsa-riutilizzabile-del-primo-piano-con-le-drogherie-su-erba.jpg" alt="NaturaSì" onerror="this.onerror=null; this.src='https://placehold.co/600x180/cccccc/ffffff?text=Immagine+non+disp.';">
                         <div class="shop-item-content">
                             <h4 data-translate-key="market_bio_name">NaturaSì</h4>
                             <p class="shop-distance" data-translate-key="market_bio_loc">8 min in macchina</p>
                             <p class="shop-description" data-translate-key="market_bio_desc">Prodotti bio, naturali, vegan/veg.</p>
                             <a href="https://maps.google.com/maps?q=NaturaS%C3%AC+Padova" target="_blank" rel="noopener noreferrer" class="btn btn-map btn-sm"><i class="fas fa-map-marker-alt"></i> <span data-translate-key="btn_go">Vai</span></a>
                         </div>
                     </div>
                     <div class="shop-item">
                         <img src="https://i.imgur.com/C7STaIv.jpeg" alt="Pescheria Bragosso" onerror="this.onerror=null; this.src='https://placehold.co/600x180/cccccc/ffffff?text=Immagine+non+disp.';">
                         <div class="shop-item-content">
                             <h4 data-translate-key="market_fish_name">Pescheria Bragosso</h4>
                             <p class="shop-distance" data-translate-key="market_fish_loc">6 min in macchina</p>
                             <p class="shop-description" data-translate-key="market_fish_desc">Pesce fresco dell'Adriatico.</p>
                             <a href="https://maps.google.com/maps?q=Pescheria+Bragosso+Padova" target="_blank" rel="noopener noreferrer" class="btn btn-map btn-sm"><i class="fas fa-map-marker-alt"></i> <span data-translate-key="btn_go">Vai</span></a>
                         </div>
                     </div>
                     <div class="shop-item">
                         <img src="https://i.imgur.com/vIEAdIR.jpeg" alt="Macelleria da Mattia" onerror="this.onerror=null; this.src='https://placehold.co/600x180/cccccc/ffffff?text=Immagine+non+disp.';">
                         <div class="shop-item-content">
                             <h4 data-translate-key="market_butcher_name">Macelleria da Mattia</h4>
                             <p class="shop-distance" data-translate-key="market_butcher_loc">13 min a piedi</p>
                             <p class="shop-description" data-translate-key="market_butcher_desc">Macelleria storica con carni selezionate venete e tagli speciali su richiesta.</p>
                             <a href="https://maps.app.goo.gl/Vs81NCFStJWo7LEc9" target="_blank" rel="noopener noreferrer" class="btn btn-map btn-sm"><i class="fas fa-map-marker-alt"></i> <span data-translate-key="btn_go">Vai</span></a>
                         </div>
                     </div>
                 </div>
             </div>
        </div>

        <div id="convenzioni" class="page" data-title="Convenzioni">
             <h2 class="text-center mb-8" data-translate-key="deals_title">Convenzioni</h2>
             <div class="convenzioni-list">
                 <div class="custom-card">
                     <div class="convenzione-layout">
                         <div class="convenzione-image">
                             <img src="https://graziati.com/wp-content/uploads/2024/05/opengraph.jpg" alt="Pasticceria Graziati" onerror="this.onerror=null; this.src='https://placehold.co/300x200/cccccc/ffffff?text=Immagine+non+disp.';">
                         </div>
                         <div class="convenzione-content">
                             <h3 data-translate-key="deals_graziati_title">Pasticceria Graziati – Tradizione dal 1919</h3>
                             <p data-translate-key="deals_graziati_desc">Nel cuore pulsante di Piazza della Frutta, un’istituzione padovana ti aspetta con dolci prelibatezze, caffè d’autore e una pasticceria raffinata che incanta da oltre un secolo.</p>
                             <ul class="styled-list">
                                 <li><i class="fas fa-percent"></i><div data-translate-key="deals_graziati_offer"><strong>Sconto del 10%</strong> su ogni consumazione.</div></li>
                                 <li><i class="fas fa-ticket-alt"></i><div data-translate-key="deals_graziati_howto"><strong>Come accedere allo sconto:</strong> Mostra il tuo coupon digitale scaricabile da questa app, direttamente al banco.</div></li>
                             </ul>
                             <div class="convenzione-actions">
                                 <a href="https://maps.app.goo.gl/QSpYvaNbXWbn6vzDA" target="_blank" rel="noopener noreferrer" class="btn btn-map btn-sm"><i class="fas fa-map-marker-alt"></i> <span data-translate-key="btn_go">Vai</span></a>
                                 <button onclick="downloadCoupon('graziati')" class="btn btn-download btn-sm"><i class="fas fa-download"></i> <span data-translate-key="btn_download_coupon">Scarica Buono</span></button>
                             </div>
                         </div>
                     </div>
                 </div>
                 <div class="custom-card">
                    <div class="convenzione-layout">
                        <div class="convenzione-image">
                            <img src="https://i.pinimg.com/originals/ff/ce/87/ffce875df454a7ed3787652675441823.jpg" alt="Cristal Boutique" onerror="this.onerror=null; this.src='https://placehold.co/300x200/cccccc/ffffff?text=Immagine+non+disp.';">
                        </div>
                        <div class="convenzione-content">
                            <h3 data-translate-key="deals_crystal_title">Cristal Boutique - Eleganza in Vetro e Gioielli</h3>
                            <p data-translate-key="deals_crystal_desc">Scopri l'arte del vetro di Murano e gioielli unici ad Abano Terme. Un tocco di classe e tradizione.</p>
                            <ul class="styled-list">
                                <li><i class="fas fa-percent"></i><div data-translate-key="deals_crystal_offer"><strong>Sconto del 10%</strong> su tutti gli acquisti.</div></li>
                                <li><i class="fas fa-ticket-alt"></i><div data-translate-key="deals_crystal_howto"><strong>Come accedere allo sconto:</strong> Mostra il tuo coupon digitale scaricabile da questa app, direttamente in cassa.</div></li>
                            </ul>
                            <div class="convenzione-actions">
                                <a href="https://maps.app.goo.gl/WaP1QWYrFUdxp9Ce8" target="_blank" rel="noopener noreferrer" class="btn btn-map btn-sm"><i class="fas fa-map-marker-alt"></i> <span data-translate-key="btn_go">Vai</span></a>
                                <button onclick="downloadCoupon('crystal')" class="btn btn-download btn-sm"><i class="fas fa-download"></i> <span data-translate-key="btn_download_coupon">Scarica Buono</span></button>
                            </div>
                        </div>
                    </div>
                </div>
             </div>
        </div>

        <div id="posti" class="page" data-title="Posti da Visitare">
            <h2 class="text-center mb-4" data-translate-key="places_title">I Tesori di Padova</h2>

            <div class="custom-card gemini-feature-box">
                <h3 data-translate-key="gemini_itinerary_title">✨ Crea il Tuo Itinerario Ideale</h3>
                <p class="text-light-secondary mb-4" data-translate-key="gemini_itinerary_desc">Siamo qui per aiutarti a creare un'esperienza unica. Dicci cosa ti appassiona e per quanti giorni ti fermi, ti prepareremo un itinerario su misura per scoprire il meglio di Padova.</p>
                <div class="flex flex-col md:flex-row gap-4 mb-4">
                    <div class="flex-grow">
                        <label for="itinerary-interests" class="block mb-1 text-sm font-medium text-light" data-translate-key="gemini_itinerary_interests_label">I tuoi interessi</label>
                        <input type="text" id="itinerary-interests" class="w-full rounded-lg p-2.5" placeholder="Es. arte, cibo, relax, storia...">
                    </div>
                    <div>
                        <label for="itinerary-days" class="block mb-1 text-sm font-medium text-light" data-translate-key="gemini_itinerary_days_label">Numero di giorni</label>
                        <select id="itinerary-days" class="block w-full p-2.5 rounded-lg">
                            <option value="1" data-translate-key="gemini_itinerary_day_1">1 Giorno</option>
                            <option value="2" selected data-translate-key="gemini_itinerary_day_2">2 Giorni</option>
                            <option value="3" data-translate-key="gemini_itinerary_day_3">3 Giorni</option>
                            <option value="4" data-translate-key="gemini_itinerary_day_4">4 Giorni</option>
                            <option value="5" data-translate-key="gemini_itinerary_day_5">5 Giorni</option>
                        </select>
                    </div>
                </div>
                <button id="generate-itinerary-btn" class="btn btn-primary w-full justify-center">
                    <span data-translate-key="gemini_itinerary_btn_generate">Prepara il mio Itinerario</span>
                </button>
                <div id="itinerary-loader" class="text-center hidden mt-4"><div class="loader"></div></div>
                <div id="itinerary-result" class="hidden prose prose-invert"></div>
            </div>

            <div class="grid posti-grid">
                <div class="custom-card posto-card">
                    <img src="https://www.culturaveneto.it/uploads/attachments/cm3ri6fxo018kar74g6v4b2wo-7-cappella-degli-scrovegni-lato-altare.full.jpg" alt="Cappella degli Scrovegni" onerror="this.onerror=null; this.src='https://placehold.co/600x250/cccccc/ffffff?text=Immagine+non+disp.';">
                    <div class="posto-content">
                        <h3 data-translate-key="places_scrovegni_title">Cappella degli Scrovegni</h3>
                        <p data-translate-key="places_scrovegni_desc">🌟 Un capolavoro assoluto dell’arte mondiale: gli affreschi di Giotto vi lasceranno senza fiato. Un tuffo emozionante nel Trecento italiano.</p>
                        <div class="posto-actions">
                            <a href="https://maps.app.goo.gl/8f6435a2d1d4b6c17" target="_blank" rel="noopener noreferrer" class="btn btn-map btn-sm"><i class="fas fa-map-marker-alt"></i> <span data-translate-key="btn_go">Vai</span></a>
                            <a href="https://www.cappelladegliscrovegni.it/" target="_blank" rel="noopener noreferrer" class="btn btn-info btn-sm"><i class="fas fa-info-circle"></i> <span data-translate-key="btn_info">Info</span></a>
                        </div>
                    </div>
                </div>
                <div class="custom-card posto-card">
                    <img src="https://cdn.sfusato.com/UPa1yDfcwu-6k9uMQQ0w9o3Jl1IJDpp8ztGe-2U_FtA/rs:fill:1024:576:true/c:2048:1152:fp:0.5:0.48046875/aHR0cHM6Ly93d3cucGFkb3ZhLmNvbS91cGxvYWRzL2ltYWdlcy8yMDIyLzMvMTQvNGZjOWM1NDYtYjI3NS00MGJhLTlkODgtMjQ1ZDI3MjdiMmYwLmpwZw.jpg" alt="Basilica di Sant’Antonio" onerror="this.onerror=null; this.src='https://placehold.co/600x250/cccccc/ffffff?text=Immagine+non+disp.';">
                    <div class="posto-content">
                        <h3 data-translate-key="places_santantonio_title">Basilica di Sant’Antonio</h3>
                        <p data-translate-key="places_santantonio_desc">⛪ Un luogo di fede, arte e silenzio. Custodisce le spoglie del Santo ed è una delle mete spirituali più importanti d’Europa.</p>
                        <div class="posto-actions">
                            <a href="https://maps.app.goo.gl/L3YxXnZJ9wz4q2f88" target="_blank" rel="noopener noreferrer" class="btn btn-map btn-sm"><i class="fas fa-map-marker-alt"></i> <span data-translate-key="btn_go">Vai</span></a>
                            <a href="https://www.santantonio.org/it" target="_blank" rel="noopener noreferrer" class="btn btn-info btn-sm"><i class="fas fa-info-circle"></i> <span data-translate-key="btn_info">Info</span></a>
                        </div>
                    </div>
                </div>
                <div class="custom-card posto-card">
                    <img src="https://heritage.unipd.it/wp-content/uploads/2023/03/n_orto_botanico_conclusus.jpeg" alt="Orto Botanico di Padova" onerror="this.onerror=null; this.src='https://placehold.co/600x250/cccccc/ffffff?text=Immagine+non+disp.';">
                    <div class="posto-content">
                        <h3 data-translate-key="places_orto_title">Orto Botanico di Padova</h3>
                        <p data-translate-key="places_orto_desc">🌿 Il giardino scientifico più antico del mondo ancora in attività! Un mix perfetto tra storia, natura e innovazione.</p>
                        <div class="posto-actions">
                            <a href="https://maps.app.goo.gl/h6f3ZkFjXgZ2yY3f9" target="_blank" rel="noopener noreferrer" class="btn btn-map btn-sm"><i class="fas fa-map-marker-alt"></i> <span data-translate-key="btn_go">Vai</span></a>
                            <a href="https://www.ortobotanicopd.it/" target="_blank" rel="noopener noreferrer" class="btn btn-info btn-sm"><i class="fas fa-info-circle"></i> <span data-translate-key="btn_info">Info</span></a>
                        </div>
                    </div>
                </div>
                <div class="custom-card posto-card">
                    <img src="https://dynamic-media-cdn.tripadvisor.com/media/photo-o/08/0c/f8/5c/prato-della-valle.jpg?w=1200&h=-1&s=1" alt="Prato della Valle" onerror="this.onerror=null; this.src='https://placehold.co/600x250/cccccc/ffffff?text=Immagine+non+disp.';">
                    <div class="posto-content">
                        <h3 data-translate-key="places_prato_title">Prato della Valle</h3>
                        <p data-translate-key="places_prato_desc">🏛️ Una delle piazze più grandi d’Europa: statue, canali, eventi e relax. Perfetta per una passeggiata o un picnic nel cuore della città.</p>
                        <div class="posto-actions">
                            <a href="https://maps.app.goo.gl/9w1tZq2yY3Z4x5f69" target="_blank" rel="noopener noreferrer" class="btn btn-map btn-sm"><i class="fas fa-map-marker-alt"></i> <span data-translate-key="btn_go">Vai</span></a>
                            <a href="https://it.wikipedia.org/wiki/Prato_della_Valle" target="_blank" rel="noopener noreferrer" class="btn btn-info btn-sm"><i class="fas fa-info-circle"></i> <span data-translate-key="btn_info">Info</span></a>
                        </div>
                    </div>
                </div>
                <div class="custom-card posto-card">
                    <img src="https://www.immobiliare.it/news/app/uploads/2024/08/Palazzo-della-Ragione-a-Padova-cosa-vedere-e-perche-si-chiama-cosi.jpeg" alt="Palazzo della Ragione & le Piazze" onerror="this.onerror=null; this.src='https://placehold.co/600x250/cccccc/ffffff?text=Immagine+non+disp.';">
                    <div class="posto-content">
                        <h3 data-translate-key="places_ragione_title">Palazzo della Ragione & le Piazze</h3>
                        <p data-translate-key="places_ragione_desc">🛍️ Un tempo tribunale medievale, oggi simbolo della vita padovana. Scopri i mercati di Piazza delle Erbe e Piazza della Frutta… e prova un panino tipico!</p>
                        <div class="posto-actions">
                            <a href="https://maps.app.goo.gl/p5d9z6w7x8y9z1A27" target="_blank" rel="noopener noreferrer" class="btn btn-map btn-sm"><i class="fas fa-map-marker-alt"></i> <span data-translate-key="btn_go">Vai</span></a>
                             <a href="https://padovamusei.it/it/sedi-monumentali/palazzo-ragione" target="_blank" rel="noopener noreferrer" class="btn btn-info btn-sm"><i class="fas fa-info-circle"></i> <span data-translate-key="btn_info">Info</span></a>
                        </div>
                    </div>
                </div>
                <div class="custom-card posto-card">
                    <img src="https://www.caffepedrocchi.it/wp-content/uploads/2022/03/Caffe-Pedrocchi.jpg" alt="Caffè Pedrocchi" onerror="this.onerror=null; this.src='https://placehold.co/600x250/cccccc/ffffff?text=Immagine+non+disp.';">
                    <div class="posto-content">
                        <h3 data-translate-key="places_pedrocchi_title">Caffè Pedrocchi</h3>
                        <p data-translate-key="places_pedrocchi_desc">☕ Il caffè “senza porte” dal 1831. Eleganza, storia e il mitico caffè alla menta: una pausa speciale nel centro di Padova.</p>
                        <div class="posto-actions">
                            <a href="https://maps.app.goo.gl/XyZ4w5Z6t7R8x9yY6" target="_blank" rel="noopener noreferrer" class="btn btn-map btn-sm"><i class="fas fa-map-marker-alt"></i> <span data-translate-key="btn_go">Vai</span></a>
                            <a href="https://www.caffepedrocchi.it/" target="_blank" rel="noopener noreferrer" class="btn btn-info btn-sm"><i class="fas fa-info-circle"></i> <span data-translate-key="btn_info">Info</span></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="guida_casa" class="page" data-title="Guida alla Casa">
             <h2 class="text-center mb-8" data-translate-key="house_guide_title">Guida alla Casa</h2>
             <div class="custom-card max-w-3xl mx-auto">
                 <details class="faq-item">
                     <summary>
                         <i class="fas fa-coffee summary-icon"></i>
                         <span class="summary-text" data-translate-key="guide_q_coffee">Macchina del Caffè</span>
                     </summary>
                     <div>
                         <p data-translate-key="guide_a_coffee_desc">La macchinetta del caffè è facilissima da utilizzare. Per tutte le istruzioni dettagliate su come utilizzarla, guarda il video qui sotto.</p>
                         <a href="https://youtu.be/KHYfig93G60?si=PGhVbC-ylEQEZohk" target="_blank" rel="noopener noreferrer" class="btn btn-video btn-sm mt-2">
                             <i class="fas fa-play-circle"></i> <span data-translate-key="guide_a_coffee_button">Guarda il Video Tutorial</span>
                         </a>
                     </div>
                 </details>
                 <details class="faq-item">
                     <summary>
                         <i class="fas fa-thermometer-half summary-icon"></i>
                         <span class="summary-text" data-translate-key="guide_q_ac">Aria Condizionata</span>
                     </summary>
                     <div data-translate-key="guide_a_ac">
                        </div>
                 </details>
                 <details class="faq-item">
                     <summary>
                         <i class="fas fa-tv summary-icon"></i>
                         <span class="summary-text" data-translate-key="guide_q_tv">Smart TV e Intrattenimento</span>
                     </summary>
                     <div data-translate-key="guide_a_tv">
                        </div>
                 </details>
                 <details class="faq-item">
                     <summary>
                         <i class="fas fa-bolt summary-icon"></i>
                         <span class="summary-text" data-translate-key="guide_q_microwave">Microonde</span>
                     </summary>
                     <div data-translate-key="guide_a_microwave">
                         </div>
                 </details>
                 <details class="faq-item">
                     <summary>
                         <i class="fas fa-plug summary-icon"></i>
                         <span class="summary-text" data-translate-key="guide_q_power_outage">Cosa fare se salta la luce</span>
                     </summary>
                     <div data-translate-key="guide_a_power_outage">
                        </div>
                 </details>
                 <details class="faq-item">
                     <summary>
                         <i class="fas fa-shirt summary-icon"></i>
                         <span class="summary-text" data-translate-key="guide_q_washing_machine">Lavatrice</span>
                     </summary>
                     <div data-translate-key="guide_a_washing_machine">
                        </div>
                 </details>
                 <details class="faq-item">
                     <summary>
                         <i class="fas fa-mug-hot summary-icon"></i>
                         <span class="summary-text" data-translate-key="guide_q_kettle">Bollitore</span>
                     </summary>
                     <div data-translate-key="guide_a_kettle">
                        </div>
                 </details>
                 <details class="faq-item">
                     <summary>
                         <i class="fas fa-phone-alt summary-icon"></i>
                         <span class="summary-text" data-translate-key="guide_q_contacts">Contatti Utili</span>
                     </summary>
                     <div data-translate-key="guide_a_contacts">
                        </div>
                 </details>
             </div>
        </div>

        <div id="arrivederci" class="page" data-title="Arrivederci e Grazie!">
             <div class="custom-card max-w-lg mx-auto">
                <div class="text-center">
                    <i class="fas fa-hand-peace text-5xl mb-4 text-primary"></i>
                    <h2 data-translate-key="goodbye_title_new">Arrivederci e Grazie!</h2>
                    <p class="text-light-secondary" data-translate-key="goodbye_p1_new">Speriamo che il tuo soggiorno nel nostro loft sia stato indimenticabile e che Padova ti abbia conquistato.</p>
                    <p class="text-light-secondary mb-6" data-translate-key="goodbye_p2_new">Il tuo feedback è preziosissimo per noi. Ci aiuta a crescere e a offrire un'esperienza sempre migliore. Se ti va, ti saremmo immensamente grati se potessi dedicarci un minuto del tuo tempo per lasciarci una recensione.</p>
                    
                    <a href="#REVIEW_LINK" onclick="event.preventDefault();" target="_blank" rel="noopener noreferrer" class="btn btn-primary mt-2 inline-flex">
                        <i class="fas fa-star"></i> <span data-translate-key="goodbye_btn_review">Lascia una Recensione</span>
                    </a>
                </div>
                
                <details class="faq-item mt-10">
                    <summary>
                       <i class="fas fa-briefcase summary-icon"></i>
                       <span class="summary-text" data-translate-key="goodbye_pm_title">Sei un Proprietario di Casa?</span>
                    </summary>
                    <div class="text-center pt-4">
                        <p data-translate-key="goodbye_pm_p1" class="mb-4">Gestire un immobile può essere complesso. Offriamo un servizio di property management completo per massimizzare i tuoi guadagni e liberarti da ogni pensiero.</p>
                        <p data-translate-key="goodbye_pm_p2">Dalla gestione delle prenotazioni alla manutenzione, pensiamo a tutto noi.</p>
                        <a id="pm-whatsapp-link" href="#" target="_blank" rel="noopener noreferrer" class="btn btn-primary mt-4 inline-flex">
                            <i class="fab fa-whatsapp"></i> <span data-translate-key="goodbye_btn_pm">Contattaci su WhatsApp</span>
                        </a>
                    </div>
                </details>

                <div class="text-center mt-10 pt-8 border-t border-border-color-light">
                    <h3 class="text-primary font-bold" data-translate-key="goodbye_discount_title">Un Grazie Speciale per Voi</h3>
                    <p class="text-light-secondary mt-4" data-translate-key="goodbye_discount_p1">Per ringraziarti di averci scelto, vogliamo offrirti un codice sconto del <strong>5%</strong> sulla tua prossima prenotazione diretta.</p>
                    <p class="text-light-secondary mt-2" data-translate-key="goodbye_discount_p2">In più, per chi ci aiuta a brillare con un feedback eccezionale, lo sconto fedeltà <strong>aumenta al 15%</strong>! È il nostro modo per dire grazie a chi ci valuta con il punteggio massimo in ogni categoria.</p>
                    
                    <a href="https://moorentpm.bookpage.io/it" target="_blank" rel="noopener noreferrer" class="btn btn-secondary mt-6 inline-flex">
                        <i class="fas fa-calendar-alt"></i> <span data-translate-key="goodbye_btn_book">Prenota il tuo Prossimo Soggiorno</span>
                    </a>
                </div>

             </div>
        </div>
        
        <footer class="page-footer">
            <div class="social-links">
                <a href="https://www.instagram.com" target="_blank" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                <a href="https://www.linkedin.com" target="_blank" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
                <a href="https://www.facebook.com" target="_blank" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
            </div>
            <a href="https://linktr.ee" target="_blank" class="btn btn-primary btn-sm linktree-btn">
                <i class="fas fa-link"></i>
                <span data-translate-key="footer_linktree">Scopri di più</span>
            </a>
        </footer>
    </main>


    <div id="messageBox">Messaggio</div>

    <script>
        // --- Oggetto Traduzioni ---
        const translations = {
            it: {
                // Generali
                header_title_default: "Welcome Book",
                btn_previous: "Precedente",
                btn_next: "Successivo",
                btn_copy: "Copia",
                btn_copy_feedback: "Copiato",
                btn_go: "Vai",
                btn_info: "Info",
                btn_download_coupon: "Scarica Buono",
                btn_back_home: "Torna alla Home",
                btn_show_directions: "Scopri come arrivare",
                copied_success: "Indirizzo copiato!",
                copy_error: "Errore copia indirizzo",
                copy_unsupported: "Copia non supportata",
                download_started: "Download buono avviato...",
                download_failed: "Download fallito",
                footer_linktree: "Scopri di più",
                // Titoli Pagine
                page_title_home: "Welcome Book",
                page_title_benvenuto: "Benvenuto",
                page_title_checkin_hub: "Check-in / Check-out",
                page_title_checkin: "Procedura Check-in",
                page_title_checkout: "Procedura Check-out",
                page_title_directions: "Come Arrivare",
                page_title_train_directions: "Arrivo in Treno",
                page_title_car_directions: "Arrivo in Macchina",
                page_title_wifi: "Informazioni WiFi",
                page_title_rules: "Regole della Casa",
                page_title_market: "Market & Negozi",
                page_title_deals: "Convenzioni",
                page_title_places: "Posti da Visitare",
                page_title_guide: "Guida alla Casa",
                page_title_goodbye: "Arrivederci e Grazie!",
                // Pagina Home
                home_greeting: "CARI OSPITI, Benvenuti!",
                home_subtitle: "Clicca sulle icone per esplorare",
                home_btn_welcome: "BENVENUTO",
                home_btn_directions: "COME ARRIVARE",
                home_btn_checkin_out: "CHECK-IN / OUT",
                home_btn_wifi: "WIFI",
                home_btn_rules: "REGOLE CASA",
                home_btn_market: "MARKET",
                home_btn_deals: "CONVENZIONI",
                home_btn_places: "POSTI DA VISITARE",
                home_btn_guide: "GUIDA ALLA CASA",
                home_btn_goodbye: "ARRIVEDERCI",
                // Pagina Benvenuto
                welcome_title_new: "Benvenuti nel Cuore di Padova: Il Vostro Rifugio Elegante",
                welcome_greeting_new: "Gentili ospiti,",
                welcome_intro_new: "Siamo lieti di darvi il benvenuto nel nostro accogliente alloggio, il luogo ideale per vivere un soggiorno indimenticabile tra arte, storia e comfort nel cuore di Padova.",
                welcome_subtitle_location: "Posizione Strategica",
                welcome_location_desc: "Situato a soli 5 minuti a piedi dalla stazione ferroviaria, il nostro loft offre un accesso comodo e veloce, sia che arriviate in treno sia che desideriate esplorare le bellezze della città. In appena 5 minuti a piedi, vi troverete immersi nel centro storico, pronti a scoprire le meraviglie di Padova.",
                // Hub Check-in/Check-out
                checkin_hub_title: "Check-in & Check-out",
                checkin_hub_prompt: "Seleziona l'informazione:",
                checkin_hub_btn_in: "Vedi Procedura di Check-in",
                checkin_hub_btn_out: "Vedi Procedura di Check-out",
                // Pagina Check-in Steps
                checkin_title: "Check-in",
                checkin_time: "(Dalle 15:00)",
                checkin_video_title: "Video Tutorial Check-in",
                checkin_video_desc: "Preferisci un video? Guarda il tutorial completo per un check-in facile e veloce.",
                checkin_video_button: "Guarda Ora",
                checkin_step1_title_new: "STEP 1: Identificazione Facciata",
                checkin_step1_desc_new: "Osserva il numero civico 25. Ti aiuterà a riconoscere il nostro spazio.",
                checkin_step2_title_new: "STEP 2: Cassetta Sicurezza",
                checkin_step2_desc_new: "A destra del cancello, troverai la cassetta Master Lock con le chiavi. <br>Il codice ti verrà fornito dopo l'invio dei documenti.",
                checkin_step3_title_new: "STEP 3: Accesso Portone",
                checkin_step3_desc_new: "Usa le chiavi per aprire il cancelletto e poi il portone condominiale.",
                checkin_step4_title_new: "STEP 4: Accesso Primo Piano",
                checkin_step4_desc_new: "Percorri la breve rampa di scale fino al 1° piano.",
                checkin_step5_title_new: "STEP 5: Porta 'Elegant Loft'",
                checkin_step5_desc_new: "Individua la porta con targhetta \"Elegant Loft\", numero 5.",
                checkin_step6_title_new: "STEP 6: Benvenuti!",
                checkin_step6_desc_new: "Varcata la soglia, sarai accolto da un'atmosfera calorosa!",
                // Pagina Check-out
                checkout_title_new: "Come Effettuare il Check-out",
                checkout_time_new: "(Entro le 10:00)",
                checkout_intro_new: "Per aiutarci a preparare al meglio l'appartamento per i prossimi ospiti, ti chiediamo di seguire queste semplici indicazioni prima di lasciare l'alloggio:",
                checkout_item_towels_new: "<strong>Radunare gli asciugamani usati:</strong> Per favore, lascia gli asciugamani utilizzati all'interno del lavandino del bagno.",
                checkout_item_trash_new: "<strong>Buttare la spazzatura:</strong> Ti chiediamo gentilmente di svuotare i cestini e buttare la spazzatura negli appositi contenitori pubblici all'esterno.",
                checkout_item_power_new: "<strong>Spegnere tutto:</strong> Prima di uscire:<br>– Spegni tutte le luci<br>– Porta il condizionatore e i termosifoni a zero<br>– Chiudi lo scuro della porta finestra",
                checkout_item_keys_new: "<strong>Restituire le chiavi:</strong> Per favore, riponi le chiavi nella cassetta di sicurezza MasterLock esterna, la stessa usata per il check-in.",
                checkout_item_tax_new: "<strong>Tassa di soggiorno:</strong> Gli ospiti sono gentilmente pregati di lasciare la somma per la tassa di soggiorno sopra il tavolo. 2,50€ per persona per notte, fino ad un massimo di 12,50€ per persona, esclusi i minori di 16 anni.",
                // Come Arrivare
                directions_title: "Come Arrivare",
                directions_prompt: "Come pensi di raggiungerci?",
                directions_btn_train: "In Treno",
                directions_btn_car: "In Macchina",
                directions_hub_btn_map: "Apri su Google Maps",
                train_title: "Come Raggiungerci dalla Stazione",
                train_desc: "Il nostro Elegant Loft si trova in una posizione strategica, a pochi minuti a piedi dalla stazione ferroviaria di Padova. Qualunque sia il mezzo con cui viaggi, potrai raggiungerci in modo rapido, semplice e senza stress.",
                train_walk_title: "A piedi",
                train_walk_desc: "Se viaggi con bagagli leggeri o preferisci sgranchirti le gambe dopo il viaggio, ti consigliamo una piacevole passeggiata di circa 5 minuti. Uscendo dalla stazione, ti basterà attraversare la strada e proseguire dritto fino a raggiungere Via Trieste 25. È un percorso semplice e diretto, perfetto per iniziare con tranquillità il tuo soggiorno a Padova.",
                train_tram_title: "Con il tram",
                train_tram_desc: "Se hai valigie più pesanti o preferisci un'alternativa ancora più comoda, puoi prendere il tram proprio di fronte all'uscita principale della stazione. Ti basterà salire sul tram in direzione centro e scendere alla fermata \"Trieste\", che si trova a soli 2 minuti di tragitto. La fermata si trova a 50 metri dalla nostra porta di ingresso – ideale se desideri evitare di camminare troppo con i bagagli.",
                train_btn_route: "Vedi Percorso Pedonale",
                car_title: "Parcheggio nelle Vicinanze",
                car_street_parking_title: "Parcheggio in Strada",
                car_street_parking_desc: "Spesso è possibile trovare posti auto gratuiti direttamente nella via dell'appartamento. Vi suggeriamo di controllare il lato destro della strada: è lì che, più frequentemente, si trovano parcheggi liberi e gratuiti.",
                car_recommended_parking_title: "Parcheggio Consigliato",
                car_recommended_parking_desc: "Se preferite una soluzione più sicura o se arrivate in orari di punta, vi consigliamo un parcheggio ben posizionato e facilmente accessibile a pochi minuti da noi.",
                car_btn_view_parking: "Vedi Parcheggio Consigliato",
                // Pagina WiFi
                wifi_title: "Informazioni Wi-Fi",
                wifi_ssid_label: "Network (SSID):",
                wifi_password_label: "Password:",
                wifi_connect_button: "Connettiti al Wi-Fi",
                wifi_connect_instruction: "Connessione automatica (solo da mobile)",
                // Pagina Regole
                rules_title: "Regole della Casa",
                rules_intro_final: "Benvenuti! Per rendere il soggiorno piacevole per tutti, vi chiediamo di rispettare alcune semplici regole durante la vostra permanza.",
                rules_pets_title_new: "Animali Domestici",
                rules_pets_desc_new: "Siamo felici di accogliere anche i vostri amici a quattro zampe!<br>L'appartamento è pet-friendly, ma solo per animali di piccola taglia.",
                rules_parties_title_new: "Feste ed Eventi",
                rules_parties_desc_new: "Non è consentito organizzare feste o eventi all'interno dell'appartamento, nel rispetto del vicinato e della quiete della zona.",
                rules_smoking_title_new: "Fumo",
                rules_smoking_desc_new: "Per mantenere un ambiente salubre per tutti, vi chiediamo di non fumare all'interno dell'appartamento.",
                rules_kitchen_title_new: "Pulizia della Cucina",
                rules_kitchen_desc_new: "Al momento del check-out, vi chiediamo gentilmente di lasciare piatti e stoviglie puliti.",
                rules_sustainability_title_new: "Turismo Sostenibile",
                rules_sustainability_desc1_new: "Aiutaci a proteggere il pianeta!<br>Risparmia energia, evita sprechi d'acqua, spegni le luci e i dispositivi quando non servono.",
                rules_sustainability_desc2_new: "'SAVE THE PLANET – Aiutaci a risparmiare energia e non sprecarla.'",
                rules_quiet_title_new: "Orari del Silenzio",
                rules_quiet_desc_new: "Ti chiediamo di rispettare la quiete nei seguenti orari:<br>Dalle 22:00 alle 8:00<br>Dalle 13:00 alle 15:00<br>Evita rumori forti e chiudi le porte con delicatezza.",
                rules_checkout_title_new: "Check-out",
                rules_checkout_desc_new: "L'appartamento deve essere lasciato entro le ore 10:00.<br>La tassa di soggiorno va lasciata sul tavolo.<br>L'alloggio è riservato esclusivamente agli ospiti registrati.",
                rules_damage_title_new: "Danni",
                rules_damage_desc_new: "In caso di piccoli incidenti o danneggiamenti, ti chiediamo di informarci.<br>Siamo sempre disponibili per trovare la soluzione migliore.",
                // Pagina Market
                market_title: "Market & Negozi",
                market_section_supermarkets: "Supermercati Vicini",
                market_dist_ao: "3 min piedi / 1 min auto",
                market_dist_ins: "6 min piedi / 6 min auto",
                market_dist_pam: "7 min piedi / 6 min auto",
                market_dist_despar: "6 min piedi / 7 min auto",
                market_section_specialty: "Negozi Specializzati",
                market_salumeria_name: "Salumeria al Carmine",
                market_salumeria_loc: "7 min in macchina",
                market_salumeria_desc: "Salumi, formaggi, frutta e verdura fresca.",
                market_bio_name: "NaturaSì",
                market_bio_loc: "8 min in macchina",
                market_bio_desc: "Prodotti bio, naturali, vegan/veg.",
                market_fish_name: "Pescheria Bragosso",
                market_fish_loc: "6 min in macchina",
                market_fish_desc: "Pesce fresco dell'Adriatico.",
                market_butcher_name: "Macelleria da Mattia",
                market_butcher_loc: "13 min a piedi",
                market_butcher_desc: "Macelleria storica con carni selezionate venete e tagli speciali su richiesta.",
                // Pagina Convenzioni
                deals_title: "Convenzioni",
                deals_graziati_title: "Pasticceria Graziati – Tradizione dal 1919",
                deals_graziati_desc: "Nel cuore pulsante di Piazza della Frutta, un’istituzione padovana ti aspetta con dolci prelibatezze, caffè d’autore e una pasticceria raffinata che incanta da oltre un secolo.",
                deals_graziati_offer: "<strong>Sconto del 10%</strong> su ogni consumazione.",
                deals_graziati_howto: "<strong>Come accedere allo sconto:</strong> Mostra il tuo coupon digitale scaricabile da questa app, direttamente al banco.",
                deals_crystal_title: "Cristal Boutique - Eleganza in Vetro e Gioielli",
                deals_crystal_desc: "Scopri l'arte del vetro di Murano e gioielli unici ad Abano Terme. Un tocco di classe e tradizione.",
                deals_crystal_offer: "<strong>Sconto del 10%</strong> su tutti gli acquisti.",
                deals_crystal_howto: "<strong>Come accedere allo sconto:</strong> Mostra il tuo coupon digitale scaricabile da questa app, direttamente in cassa.",
                // Pagina Posti da Visitare
                places_title: "I Tesori di Padova",
                places_scrovegni_title: "Cappella degli Scrovegni",
                places_scrovegni_desc: "🌟 Un capolavoro assoluto dell’arte mondiale: gli affreschi di Giotto vi lasceranno senza fiato. Un tuffo emozionante nel Trecento italiano.",
                places_santantonio_title: "Basilica di Sant’Antonio",
                places_santantonio_desc: "⛪ Un luogo di fede, arte e silenzio. Custodisce le spoglie del Santo ed è una delle mete spirituali più importanti d’Europa.",
                places_orto_title: "Orto Botanico di Padova",
                places_orto_desc: "🌿 Il giardino scientifico più antico del mondo ancora in attività! Un mix perfetto tra storia, natura e innovazione.",
                places_prato_title: "Prato della Valle",
                places_prato_desc: "🏛️ Una delle piazze più grandi d’Europa: statue, canali, eventi e relax. Perfetta per una passeggiata o un picnic nel cuore della città.",
                places_ragione_title: "Palazzo della Ragione & le Piazze",
                places_ragione_desc: "🛍️ Un tempo tribunale medievale, oggi simbolo della vita padovana. Scopri i mercati di Piazza delle Erbe e Piazza della Frutta… e prova un panino tipico!",
                places_pedrocchi_title: "Caffè Pedrocchi",
                places_pedrocchi_desc: "☕ Il caffè “senza porte” dal 1831. Eleganza, storia e il mitico caffè alla menta: una pausa speciale nel centro di Padova.",
                // Pagina Guida alla Casa
                house_guide_title: "Guida alla Casa",
                guide_q_coffee: "Macchina del Caffè",
                guide_a_coffee_desc: "La macchinetta del caffè è facilissima da utilizzare. Per tutte le istruzioni dettagliate su come utilizzarla, guarda il video qui sotto.",
                guide_a_coffee_button: "Guarda il Video Tutorial",
                guide_q_ac: "Aria Condizionata",
                guide_a_ac: `<p>Per una guida visiva, guarda il nostro video tutorial su YouTube. Il telecomando potrebbe essere leggermente diverso, ma le icone e le funzioni principali sono le stesse.</p><a href="https://youtu.be/mumSRUYYG_I" target="_blank" rel="noopener noreferrer" class="btn btn-video btn-sm mt-2 mb-4 inline-flex items-center"><i class="fab fa-youtube"></i><span class="ml-2">Video per l'uso</span></a><ul class="styled-list mt-4 compact-list"><li><i class="fas fa-power-off"></i><div><strong>1. Accensione / Power:</strong> Premere il pulsante ON/OFF per avviare o spegnere l’unità.</div></li><li><i class="fas fa-cogs"></i><div><strong>2. Modalità / Mode selector:</strong><p class="mt-2 mb-0"><strong>Cool (❄):</strong> raffredda l’ambiente.<br><strong>Heat (☀):</strong> riscalda (se disponibile).<br><strong>Dry (💧):</strong> deumidifica, ideale quando l’aria è umida.<br><strong>Fan (🌀):</strong> soffia aria senza cambiare la temperatura.<br><strong>Auto (A):</strong> regola automaticamente modalità, temperatura e ventola.</p></div></li><li><i class="fas fa-thermometer-half"></i><div><strong>3. Temperatura / Temperature:</strong> Usare i pulsanti “+” e “–” per alzare o abbassare la temperatura.</div></li><li><i class="fas fa-fan"></i><div><strong>4. Velocità ventola / Fan speed:</strong> Selezionare tra Bassa, Media, Alta o Auto.</div></li><li><i class="fas fa-wind"></i><div><strong>5. Direzione / Swing:</strong> Attiva/disattiva l’oscillazione delle alette per distribuire meglio l’aria.</div></li><li><i class="fas fa-moon"></i><div><strong>6. Altre modalità:</strong><p class="mt-2 mb-0"><strong>Timer:</strong> programma accensione/spegnimento.<br><strong>Sleep (🌙):</strong> regola la temperatura per un comfort notturno.<br><strong>Eco/Quiet/Turbo:</strong> modalità economica, silenziosa o di massima potenza.</p></div></li></ul>`,
                guide_q_tv: "Smart TV e Intrattenimento",
                guide_a_tv: `<p>Potete utilizzare qualsiasi app che trovate all'interno della televisione nell'apposito spazio dedicato. In alternativa, potete trasmettere contenuti dal vostro telefono alla TV tramite la rete Wi-Fi dell'appartamento.</p><a href="https://youtu.be/FoFT9twbJ1A" target="_blank" rel="noopener noreferrer" class="btn btn-video btn-sm mt-2 mb-4 inline-flex items-center"><i class="fab fa-youtube"></i><span class="ml-2">Video Tutorial Smart TV</span></a><ul class="styled-list mt-4 compact-list"><li><i class="fas fa-power-off"></i><div><strong>1. Accensione / Power:</strong> Premete Power per accendere o spegnere la TV.</div></li><li><i class="fas fa-home"></i><div><strong>2. Home / Smart Hub:</strong> Il tasto Home apre la schermata principale con tutte le app (Netflix, YouTube, TV via cavo...).</div></li><li><i class="fas fa-arrows-alt"></i><div><strong>3. Navigazione / Freccette + OK/Select:</strong> Freccette per spostarvi nel menu, OK per selezionare.</div></li><li><i class="fas fa-volume-up"></i><div><strong>4. Volume e Canali:</strong> Controllo volume (+/–) e cambio canale (CH +/–) per la TV via cavo.</div></li><li><i class="fas fa-mobile-alt"></i><div><strong>5. Tasti App dedicate:</strong> Tasti rapidi per app popolari (YouTube, Netflix).</div></li><li><i class="fas fa-undo"></i><div><strong>6. Indietro / Return:</strong> Permette di tornare indietro o chiudere un menu.</div></li><li><i class="fas fa-sign-in-alt"></i><div><strong>7. Source/Input:</strong> Per passare a TV via cavo, HDMI, USB o altre sorgenti esterne.</div></li><li><i class="fas fa-microphone"></i><div><strong>8. Voice / Microfono:</strong> Tasto vocale: pronunciate ad esempio “Apri YouTube” o “Alza volume”.</div></li></ul>`,
                guide_q_microwave: "Microonde",
                guide_a_microwave: `<p>Il microonde è a vostra disposizione. Per una guida visiva completa, vi invitiamo a guardare il video tutorial.</p><a href="https://www.amazon.it/vdp/87a8b589a9d24b2e8668e57809793580?product=B07K94YRJV&ref=cm_sw_cp_r_ib_dt_PY3inVXiQfeHr" target="_blank" rel="noopener noreferrer" class="btn btn-video btn-sm mt-2 mb-4 inline-flex items-center"><i class="fab fa-youtube"></i><span class="ml-2">Video Tutorial Microonde</span></a><h4 class="text-white font-semibold mt-4 mb-2">Funzioni Principali:</h4><ul class="styled-list compact-list"><li><i class="fas fa-play"></i><div><strong>Power / Start:</strong> Avvia la cottura o aggiunge 30 secondi con un solo tocco.</div></li><li><i class="fas fa-stop"></i><div><strong>Stop / Cancel:</strong> Interrompe o annulla il ciclo di cottura in corso.</div></li><li><i class="fas fa-clock"></i><div><strong>Selezione tempo:</strong> Usa i tasti numerici o i pulsanti +/- per impostare minuti e secondi.</div></li><li><i class="fas fa-signal"></i><div><strong>Livello di potenza (Power Level):</strong> Regola l’intensità della cottura: High (100%), Medium, Low, o funzione Defrost (scongelamento).</div></li><li><i class="fas fa-utensils"></i><div><strong>AutoCook (Programmi automatici):</strong> Seleziona una delle ricette preimpostate per una cottura automatica (es. pasta, riso, verdure, carne, pesce, dolci, ecc.).</div></li><li><i class="fas fa-forward"></i><div><strong>Jet Start:</strong> Avvio rapido con la massima potenza per 30 secondi—utile per riscaldare rapidamente.</div></li><li><i class="fas fa-bacon"></i><div><strong>Funzione Grill:</strong> Attiva la resistenza superiore per dorare e gratinare gli alimenti.</div></li><li><i class="fas fa-bread-slice"></i><div><strong>Dough Rising (Lievitazione):</strong> Mantiene la temperatura a 30°C per aiutare la lievitazione degli impasti.</div></li><li><i class="fas fa-cheese"></i><div><strong>Funzione Yogurt:</strong> Fermenta lo yogurt mantenendo costante la temperatura interna.</div></li><li><i class="fas fa-thermometer-three-quarters"></i><div><strong>Funzione Mantenimento Caldo:</strong> Mantiene il cibo caldo fino al momento di servirlo.</div></li></ul>`,
                guide_q_power_outage: "Cosa fare se salta la luce",
                guide_a_power_outage: `<a href="#" target="_blank" rel="noopener noreferrer" class="btn btn-video btn-sm mt-2 mb-4 inline-flex items-center"><i class="fas fa-play-circle"></i> Guarda il video esplicativo</a><p>⚡ È saltata la corrente? Nessun problema! Se dovesse succedere, nella maggior parte dei casi si tratta di una semplice disattivazione di uno dei contatori. Ti guidiamo in pochi semplici passaggi per ripristinare la corrente in completa autonomia.</p><h4 class="text-white font-semibold mt-4 mb-2">Procedura:</h4><ul class="styled-list compact-list"><li><i class="fas fa-plug"></i><div><strong>1. Controlla il quadro elettrico interno:</strong> Posizionati con la porta d’ingresso dell’appartamento alle tue spalle. Subito sulla destra, troverai uno sportellino: aprilo. All’interno si trova il quadro dei contatori. Se tutti gli interruttori risultano sollevati, abbassali tutti e poi rialzali uno ad uno. Se invece noti uno abbassato, sollevalo.</div></li><li><i class="fas fa-building"></i><div><strong>2. Se la corrente non torna, vai al piano terra:</strong> Esci dall’appartamento e scendi al piano terra. Con la porta d’ingresso della palazzina alle spalle, guarda subito sulla sinistra. Vedrai una piccola porta: è quella dedicata ai contatori di tutti gli appartamenti. Apri la porta e individua il contatore con la scritta bianca “ELEGANT LOFT”. Abbassa la leva e poi rialzala.</div></li><li><i class="fas fa-bolt"></i><div><strong>3. Ultimo passaggio (se ancora non funziona):</strong> Una volta aperta la porta dello sgabuzzino dei contatori, guarda subito a sinistra, non sulla parete frontale. Troverai un contatore più piccolo, singolo, anch’esso identificato dalla scritta ELEGANT LOFT. Abbassa e rialza anche quest’ultima leva.</div></li></ul>`,
                guide_q_washing_machine: "Lavatrice",
                guide_a_washing_machine: `<h4 class="text-white font-semibold mt-4 mb-2">Istruzioni per l'uso:</h4><ul class="styled-list compact-list"><li><i class="fas fa-sign-in-alt"></i><div><strong>1. Caricare i panni:</strong> Apri il coperchio superiore e inserisci i capi in modo uniforme attorno al centro. Non superare circa il 75% della capienza per evitare sbilanciamenti.</div></li><li><i class="fas fa-soap"></i><div><strong>2. Inserire il detersivo:</strong> Puoi versarlo direttamente nel cestello oppure nella vaschetta (se presente sul modello). Segui la quantità suggerita sulla confezione del detersivo.</div></li><li><i class="fas fa-sliders-h"></i><div><strong>3. Selezionare il programma:</strong> Usa la rotella o i pulsanti touch per scegliere tra i cicli disponibili: Cotton, Delicate/Silk, Eco, Hygiene/Anti-Allergy, Quick 14 min, Quick 30 °C, Synthetics, Wool.</div></li><li><i class="fas fa-temperature-high"></i><div><strong>4. Regolare la temperatura (se disponibile):</strong> Seleziona acqua calda o fredda in base alle etichette dei tessuti.</div></li><li><i class="fas fa-play-circle"></i><div><strong>5. Avviare il lavaggio:</strong> Premi il pulsante Start/Pause per iniziare il ciclo selezionato.</div></li><li><i class="fas fa-water"></i><div><strong>6. Scarico automatico:</strong> La lavatrice scarica automaticamente l’acqua al termine del ciclo. Assicurati che il tubo di scarico sia posizionato correttamente (altezza consigliata tra 60‑100 cm).</div></li><li><i class="fas fa-sync-alt"></i><div><strong>7. Centrifuga finale:</strong> Dopo lo scarico, avviene automaticamente la centrifuga per rimuovere l’umidità residua dai capi.</div></li><li><i class="fas fa-hourglass-start"></i><div><strong>8. Delayed Start (avvio ritardato):</strong> Se presente, puoi programmare l'avvio fino a 20 ore di anticipo usando la funzione Delayed Start.</div></li><li><i class="fas fa-desktop"></i><div><strong>9. Display LED:</strong> Il display mostra il tempo residuo, il programma in uso e le eventuali opzioni attive.</div></li><li><i class="fas fa-door-open"></i><div><strong>10. Al termine:</strong> Lascia il coperchio leggermente aperto per permettere l'asciugatura interna.</div></li></ul>`,
                guide_q_kettle: "Bollitore",
                guide_a_kettle: `<p>Per una guida visiva, ti invitiamo a guardare il video tutorial.</p><a href="https://www.amazon.it/vdp/1666909351e04693ba47f80fe4219255?product=B07NDCV4MV&ref=cm_sw_cp_r_ib_dt_pSxjApII8MZmF" target="_blank" rel="noopener noreferrer" class="btn btn-video btn-sm mt-2 mb-4 inline-flex items-center"><i class="fas fa-play-circle"></i><span class="ml-2">Guarda il Video Tutorial</span></a><h4 class="text-white font-semibold mt-4 mb-2">Istruzioni per l'uso:</h4><ul class="styled-list compact-list"><li><i class="fas fa-box-open"></i><div><strong>1. Apri il coperchio:</strong> premendo il tasto sull’impugnatura superiore.</div></li><li><i class="fas fa-tint"></i><div><strong>2. Riempi con acqua naturale:</strong> senza superare il livello massimo indicato.</div></li><li><i class="fas fa-plug"></i><div><strong>3. Chiudi bene il coperchio:</strong> e posiziona il bollitore sulla base elettrica.</div></li><li><i class="fas fa-power-off"></i><div><strong>4. Premi l’interruttore per l’accensione:</strong> si illuminerà la spia LED blu. Attendi pochi minuti: l’acqua andrà in ebollizione.</div></li><li><i class="fas fa-check-circle"></i><div><strong>5. Il bollitore si spegnerà automaticamente</strong> quando l’acqua sarà pronta.</div></li></ul>`,
                guide_q_contacts: "Contatti Utili",
                guide_a_contacts: `<h4 class="text-white font-semibold mb-2">Numeri di Emergenza Nazionali</h4><ul class="styled-list compact-list emergency-list mb-4"><li><i class="fas fa-exclamation-triangle"></i><div><strong>Numero Unico Emergenze:</strong> 112</div></li><li><i class="fas fa-ambulance"></i><div><strong>Ambulanza:</strong> 118</div></li><li><i class="fas fa-fire-extinguisher"></i><div><strong>Vigili del Fuoco:</strong> 115</div></li></ul><h4 class="text-white font-semibold mb-2">I Nostri Contatti per Emergenze</h4><div class="border-b border-border-color-light pb-4 mb-4"><p class="font-semibold text-light">Moorent Pm</p><div class="flex gap-2 mt-2"><a href="tel:+393534830386" class="btn btn-secondary btn-sm flex-1 justify-center"><i class="fas fa-phone-alt"></i> Chiama</a><a href="https://wa.me/393534830386?text=Ciao%20sono%20...%20dell'appartamento%20di%20Padova!%20Avrei%20bisogno%20della%20vostra%20assistenza" target="_blank" class="btn btn-success btn-sm flex-1 justify-center"><i class="fab fa-whatsapp"></i> WhatsApp</a></div></div><div class="border-b border-border-color-light pb-4 mb-4"><p class="font-semibold text-light">Beatrice</p><div class="flex gap-2 mt-2"><a href="tel:+393408894082" class="btn btn-secondary btn-sm flex-1 justify-center"><i class="fas fa-phone-alt"></i> Chiama</a><a href="https://wa.me/393408894082?text=Ciao%20sono%20...%20dell'appartamento%20di%20Isola%20Verde!%20Avrei%20bisogno%20della%20vostra%20assistenza" target="_blank" class="btn btn-success btn-sm flex-1 justify-center"><i class="fab fa-whatsapp"></i> WhatsApp</a></div></div><h4 class="text-white font-semibold mt-6 mb-2">Taxi</h4><p>Qui puoi inserire i numeri dei taxi locali.</p>`,
                // Pagina Arrivederci
                goodbye_title_new: "Arrivederci e Grazie!",
                goodbye_p1_new: "Speriamo che il tuo soggiorno nel nostro loft sia stato indimenticabile e che Padova ti abbia conquistato.",
                goodbye_p2_new: "Il tuo feedback è preziosissimo per noi. Ci aiuta a crescere e a offrire un'esperienza sempre migliore. Se ti va, ti saremmo immensamente grati se potessi dedicarci un minuto del tuo tempo per lasciarci una recensione.",
                goodbye_btn_review: "Lascia una Recensione",
                goodbye_discount_title: "Un Grazie Speciale per Voi",
                goodbye_discount_p1: "Per ringraziarti di averci scelto, vogliamo offrirti un codice sconto del <strong>5%</strong> sulla tua prossima prenotazione diretta.",
                goodbye_discount_p2: "In più, per chi ci aiuta a brillare con un feedback eccezionale, lo sconto fedeltà <strong>aumenta al 15%</strong>! È il nostro modo per dire grazie a chi ci valuta con il punteggio massimo in ogni categoria.",
                goodbye_btn_book: "Prenota il tuo Prossimo Soggiorno",
                goodbye_btn_pm: "Contattaci su WhatsApp",
                goodbye_pm_whatsapp_link: "https://wa.me/393534830386?text=Buongiorno%2C%20sono%20proprietario%2Fa%20di%20un%20immobile%20e%20sarei%20interessato%2Fa%20ai%20vostri%20servizi%20di%20Property%20Management.%20Potreste%20darmi%20qualche%20informazione%20in%20pi%C3%B9%3F%20Grazie!",
                // Gemini Features
                gemini_tip_title: "✨ Un Consiglio per Voi",
                gemini_tip_desc: "Ogni giorno chiediamo a un esperto locale un suggerimento speciale per la tua giornata a Padova. Scopri quello di oggi!",
                gemini_itinerary_title: "✨ Crea il Tuo Itinerario Ideale",
                gemini_itinerary_desc: "Siamo qui per aiutarti a creare un'esperienza unica. Dicci cosa ti appassiona e per quanti giorni ti fermi, ti prepareremo un itinerario su misura per scoprire il meglio di Padova.",
                gemini_itinerary_interests_label: "I tuoi interessi",
                gemini_itinerary_days_label: "Numero di giorni",
                gemini_itinerary_btn_generate: "Prepara il mio Itinerario",
                gemini_itinerary_loading: "Sto creando il tuo itinerario personalizzato...",
                gemini_itinerary_day_1: "1 Giorno",
                gemini_itinerary_day_2: "2 Giorni",
                gemini_itinerary_day_3: "3 Giorni",
                gemini_itinerary_day_4: "4 Giorni",
                gemini_itinerary_day_5: "5 Giorni",
                gemini_api_error: "Oops! Qualcosa è andato storto. Riprova più tardi.",

                // NUOVE CHIAVI PER PROPERTY MANAGEMENT
                goodbye_pm_title: "Sei un Proprietario di Casa?",
                goodbye_pm_p1: "Gestire un immobile può essere complesso. Offriamo un servizio di property management completo per massimizzare i tuoi guadagni e liberarti da ogni pensiero.",
                goodbye_pm_p2: "Dalla gestione delle prenotazioni alla manutenzione, pensiamo a tutto noi.",

                // Chatbot - Operatore
                chatbot_operator_msg: "Certamente. Per parlare direttamente con un operatore, clicca il pulsante qui sotto per avviare una chat su WhatsApp.",
                chatbot_operator_btn: "Contatta Operatore",
                whatsapp_prefilled_message: "Ciao, sono un ospite dell'Elegant Loft di Padova e avrei bisogno di assistenza.",
            },
            en: {
                // General
                header_title_default: "Welcome Book",
                btn_previous: "Previous",
                btn_next: "Next",
                btn_copy: "Copy",
                btn_copy_feedback: "Copied",
                btn_go: "Go",
                btn_info: "Info",
                btn_download_coupon: "Download Coupon",
                btn_back_home: "Back to Home",
                btn_show_directions: "Find out how to get here",
                copied_success: "Address copied!",
                copy_error: "Address copy error",
                copy_unsupported: "Copy not supported",
                download_started: "Coupon download started...",
                download_failed: "Download failed",
                footer_linktree: "Discover More",
                 // Page Titles
                page_title_home: "Welcome Book",
                page_title_benvenuto: "Welcome",
                page_title_checkin_hub: "Check-in / Check-out",
                page_title_checkin: "Check-in Procedure",
                page_title_checkout: "Check-out Procedure",
                page_title_directions: "How to Arrive",
                page_title_train_directions: "Arrival by Train",
                page_title_car_directions: "Arrival by Car",
                page_title_wifi: "WiFi Information",
                page_title_rules: "House Rules",
                page_title_market: "Market & Shops",
                page_title_deals: "Partner Deals",
                page_title_places: "Places to Visit",
                page_title_guide: "House Guide",
                page_title_goodbye: "Goodbye and Thank You!",
                // Home Page
                home_greeting: "DEAR GUESTS, Welcome!",
                home_subtitle: "Click the icons to explore",
                home_btn_welcome: "WELCOME",
                home_btn_directions: "DIRECTIONS",
                home_btn_checkin_out: "CHECK-IN / OUT",
                home_btn_wifi: "WIFI",
                home_btn_rules: "HOUSE RULES",
                home_btn_market: "MARKET",
                home_btn_deals: "DEALS",
                home_btn_places: "PLACES TO VISIT",
                home_btn_guide: "HOUSE GUIDE",
                home_btn_goodbye: "GOODBYE",
                // Welcome Page
                welcome_title_new: "Welcome to the Heart of Padova: Your Elegant Retreat",
                welcome_greeting_new: "Dear guests,",
                welcome_intro_new: "We are pleased to welcome you to our cozy accommodation, the ideal place for an unforgettable stay amidst art, history, and comfort in the heart of Padova.",
                welcome_subtitle_location: "Strategic Position",
                welcome_location_desc: "Located just a 5-minute walk from the train station, our loft offers convenient and fast access, whether you arrive by train or wish to explore the city's beauties. In just 5 minutes on foot, you will find yourself immersed in the historic center, ready to discover the wonders of Padova.",
                // Check-in Hub
                checkin_hub_title: "Check-in & Check-out",
                checkin_hub_prompt: "Select the information:",
                checkin_hub_btn_in: "See Check-in Procedure",
                checkin_hub_btn_out: "See Check-out Procedure",
                // Check-in Steps
                checkin_title: "Check-in",
                checkin_time: "(From 3:00 PM)",
                checkin_video_title: "Check-in Video Tutorial",
                checkin_video_desc: "Prefer a video? Watch the full tutorial for a quick and easy check-in.",
                checkin_video_button: "Watch Now",
                checkin_step1_title_new: "STEP 1: Facade Identification",
                checkin_step1_desc_new: "Look for the street number 25. It will help you recognize our space.",
                checkin_step2_title_new: "STEP 2: Safety Box",
                checkin_step2_desc_new: "To the right of the gate, you will find the Master Lock box with the keys. <br>The code will be provided after you submit your documents.",
                checkin_step3_title_new: "STEP 3: Main Door Access",
                checkin_step3_desc_new: "Use the keys to open the small gate and then the main building door.",
                checkin_step4_title_new: "STEP 4: First Floor Access",
                checkin_step4_desc_new: "Walk up the short flight of stairs to the 1st floor.",
                checkin_step5_title_new: "STEP 5: 'Elegant Loft' Door",
                checkin_step5_desc_new: "Find the door with the 'Elegant Loft' nameplate, number 5.",
                checkin_step6_title_new: "STEP 6: Welcome!",
                checkin_step6_desc_new: "Once you cross the threshold, you will be greeted by a warm atmosphere!",
                // Check-out
                checkout_title_new: "How to Check Out",
                checkout_time_new: "(By 10:00 AM)",
                checkout_intro_new: "To help us best prepare the apartment for the next guests, please follow these simple instructions before leaving:",
                checkout_item_towels_new: "<strong>Gather used towels:</strong> Please leave used towels inside the bathroom sink.",
                checkout_item_trash_new: "<strong>Dispose of trash:</strong> We kindly ask you to empty the bins and dispose of the trash in the designated public containers outside.",
                checkout_item_power_new: "<strong>Turn everything off:</strong> Before leaving:<br>– Turn off all lights<br>– Set the air conditioner and radiators to zero<br>– Close the balcony door shutter",
                checkout_item_keys_new: "<strong>Return the keys:</strong> Please put the keys back in the external MasterLock safety box, the same one used for check-in.",
                checkout_item_tax_new: "<strong>Tourist tax:</strong> Guests are kindly asked to leave the amount for the tourist tax on the table. €2.50 per person per night, up to a maximum of €12.50 per person, excluding children under 16.",
                // Directions
                directions_title: "How to Arrive",
                directions_prompt: "How do you plan to reach us?",
                directions_btn_train: "By Train",
                directions_btn_car: "By Car",
                directions_hub_btn_map: "Open on Google Maps",
                train_title: "From the Station on Foot",
                train_desc: "Our Elegant Loft is strategically located, just a few minutes' walk from the Padova train station. Whatever your means of travel, you can reach us quickly, easily, and stress-free.",
                train_walk_title: "On foot",
                train_walk_desc: "If you are traveling with light luggage or prefer to stretch your legs after the journey, we recommend a pleasant 5-minute walk. Upon exiting the station, you just need to cross the road and continue straight until you reach Via Trieste 25. It is a simple and direct route, perfect for starting your stay in Padova with ease.",
                train_tram_title: "By tram",
                train_tram_desc: "If you have heavier luggage or prefer an even more convenient alternative, you can take the tram right in front of the main station exit. You just need to get on the tram towards the city center and get off at the \"Trieste\" stop, which is only a 2-minute ride away. The stop is 50 meters from our front door – ideal if you want to avoid walking too much with your luggage.",
                train_btn_route: "See Walking Route",
                car_title: "Parking and Car Access",
                car_street_parking_title: "Street Parking",
                car_street_parking_desc: "It is often possible to find free parking spaces directly on the apartment's street. We suggest checking the right side of the road: that is where free parking is most frequently found.",
                car_recommended_parking_title: "Recommended Parking",
                car_recommended_parking_desc: "If you prefer a more secure solution or if you arrive during peak hours, we recommend a well-located and easily accessible car park just a few minutes from us.",
                car_btn_view_parking: "See Recommended Parking",
                // WiFi
                wifi_title: "Wi-Fi Information",
                wifi_ssid_label: "Network (SSID):",
                wifi_password_label: "Password:",
                wifi_connect_button: "Connect to Wi-Fi",
                wifi_connect_instruction: "Automatic connection (mobile only)",
                // Rules (Updated)
                rules_title: "House Rules",
                rules_intro_final: "Welcome! To make the stay enjoyable for everyone, we ask you to respect a few simple rules during your stay.",
                rules_pets_title_new: "Pets",
                rules_pets_desc_new: "We are happy to welcome your four-legged friends too!<br>The apartment is pet-friendly, but only for small pets.",
                rules_parties_title_new: "Parties and Events",
                rules_parties_desc_new: "Organizing parties or events inside the apartment is not allowed, out of respect for the neighbors and the quietness of the area.",
                rules_smoking_title_new: "Smoking",
                rules_smoking_desc_new: "To maintain a healthy environment for everyone, we ask you not to smoke inside the apartment.",
                rules_kitchen_title_new: "Kitchen Cleaning",
                rules_kitchen_desc_new: "At check-out, we kindly ask you to leave dishes and cookware clean.",
                rules_sustainability_title_new: "Sustainable Tourism",
                rules_sustainability_desc1_new: "Help us protect the planet!<br>Save energy, avoid wasting water, turn off lights and devices when not needed.",
                rules_sustainability_desc2_new: "'SAVE THE PLANET – Help us save energy and not waste it.'",
                rules_quiet_title_new: "Quiet Hours",
                rules_quiet_desc_new: "We ask you to respect the quiet hours during the following times:<br>From 10:00 PM to 8:00 AM<br>From 1:00 PM to 3:00 PM<br>Avoid loud noises and close doors gently.",
                rules_checkout_title_new: "Check-out",
                rules_checkout_desc_new: "The apartment must be vacated by 10:00 AM.<br>The tourist tax should be left on the table.<br>The accommodation is reserved exclusively for registered guests.",
                rules_damage_title_new: "Damages",
                rules_damage_desc_new: "In case of minor accidents or damages, please inform us.<br>We are always available to find the best solution.",
                // Market
                market_title: "Market & Shops",
                market_section_supermarkets: "Nearby Supermarkets",
                market_dist_ao: "3 min walk / 1 min car",
                market_dist_ins: "6 min walk / 6 min car",
                market_dist_pam: "7 min walk / 6 min car",
                market_dist_despar: "6 min walk / 7 min car",
                market_section_specialty: "Specialty Shops",
                market_salumeria_name: "Al Carmine Delicatessen",
                market_salumeria_loc: "7 min by car",
                market_salumeria_desc: "Cured meats, cheeses, fresh fruit and vegetables.",
                market_bio_name: "NaturaSì",
                market_bio_loc: "8 min by car",
                market_bio_desc: "Organic, natural, vegan/veg products.",
                market_fish_name: "Bragosso Fish Market",
                market_fish_loc: "6 min by car",
                market_fish_desc: "Fresh Adriatic fish.",
                market_butcher_name: "Da Mattia Butcher Shop",
                market_butcher_loc: "13 min by walk",
                market_butcher_desc: "Historic butcher shop with selected Venetian meats and special cuts on request.",
                // Deals
                deals_title: "Partner Deals",
                deals_graziati_title: "Pasticceria Graziati – Tradition since 1919",
                deals_graziati_desc: "In the beating heart of Piazza della Frutta, a Paduan institution awaits you with delicious sweets, signature coffees, and refined pastries that have been enchanting for over a century.",
                deals_graziati_offer: "<strong>10% discount</strong> on your entire bill.",
                deals_graziati_howto: "<strong>How to get the discount:</strong> Show your downloadable digital coupon from this app directly at the counter.",
                deals_crystal_title: "Cristal Boutique - Elegance in Glass and Jewels",
                deals_crystal_desc: "Discover the art of Murano glass and unique jewelry in Abano Terme. A touch of class and tradition.",
                deals_crystal_offer: "<strong>10% discount</strong> on all purchases.",
                deals_crystal_howto: "<strong>How to get the discount:</strong> Show your downloadable digital coupon from this app directly at the checkout.",
                // Places
                places_title: "The Treasures of Padua",
                places_scrovegni_title: "Scrovegni Chapel",
                places_scrovegni_desc: "🌟 An absolute masterpiece of world art: Giotto's frescoes will leave you breathless. An exciting dive into the Italian fourteenth century.",
                places_santantonio_title: "Basilica of Saint Anthony",
                places_santantonio_desc: "⛪ A place of faith, art, and silence. It houses the Saint's remains and is one of the most important spiritual destinations in Europe.",
                places_orto_title: "Botanical Garden of Padua",
                places_orto_desc: "🌿 The world's oldest scientific garden still in operation! A perfect mix of history, nature, and innovation.",
                places_prato_title: "Prato della Valle",
                places_prato_desc: "🏛️ One of the largest squares in Europe: statues, canals, events, and relaxation. Perfect for a walk or a picnic in the heart of the city.",
                places_ragione_title: "Palazzo della Ragione & the Squares",
                places_ragione_desc: "🛍️ Once a medieval courthouse, today a symbol of Paduan life. Discover the markets of Piazza delle Erbe and Piazza della Frutta... and try a typical sandwich!",
                places_pedrocchi_title: "Caffè Pedrocchi",
                places_pedrocchi_desc: "☕ The “doorless” café since 1831. Elegance, history, and the legendary mint coffee: a special break in the center of Padua.",
                 // House Guide
                house_guide_title: "House Guide",
                guide_q_coffee: "Coffee Machine",
                guide_a_coffee_desc: "The coffee machine is very easy to use. For detailed instructions on how to use it, watch the video below.",
                guide_a_coffee_button: "Watch Video Tutorial",
                guide_q_ac: "Air Conditioning",
                guide_a_ac: `<p>For a visual guide, watch our YouTube tutorial. The remote control might look slightly different, but the main icons and functions are the same.</p><a href="https://youtu.be/gR8xmI02Ab4" target="_blank" rel="noopener noreferrer" class="btn btn-video btn-sm mt-2 mb-4 inline-flex items-center"><i class="fab fa-youtube"></i><span class="ml-2">Watch Video Guide</span></a><ul class="styled-list mt-4 compact-list"><li><i class="fas fa-power-off"></i><div><strong>1. Power:</strong> Press the ON/OFF button to start or stop the unit.</div></li><li><i class="fas fa-cogs"></i><div><strong>2. Mode selector:</strong><p class="mt-2 mb-0"><strong>Cool (❄):</strong> cools the room.<br><strong>Heat (☀):</strong> heats the room (if available).<br><strong>Dry (💧):</strong> dehumidifies, ideal for humid weather.<br><strong>Fan (🌀):</strong> blows air without changing temperature.<br><strong>Auto (A):</strong> automatically adjusts mode, temperature, and fan speed.</p></div></li><li><i class="fas fa-thermometer-half"></i><div><strong>3. Temperature:</strong> Use the “+” and “–” buttons to raise or lower the temperature.</div></li><li><i class="fas fa-fan"></i><div><strong>4. Fan speed:</strong> Select between Low, Med, High, or Auto.</div></li><li><i class="fas fa-wind"></i><div><strong>5. Swing control:</strong> Activates/deactivates the louver swing to distribute air better.</div></li><li><i class="fas fa-moon"></i><div><strong>6. Other modes:</strong><p class="mt-2 mb-0"><strong>Timer:</strong> schedule automatic on/off.<br><strong>Sleep (🌙):</strong> adjusts temperature for nighttime comfort.<br><strong>Eco/Quiet/Turbo:</strong> for economy, silent, or max power modes.</p></div></li></ul>`,
                guide_q_tv: "Smart TV & Entertainment",
                guide_a_tv: `<p>You can use any app you find on the TV in the dedicated app space. Alternatively, you can cast content from your phone to the TV via the apartment's Wi-Fi network.</p><a href="https://youtu.be/FoFT9twbJ1A" target="_blank" rel="noopener noreferrer" class="btn btn-video btn-sm mt-2 mb-4 inline-flex items-center"><i class="fab fa-youtube"></i><span class="ml-2">Smart TV Video Tutorial</span></a><ul class="styled-list mt-4 compact-list"><li><i class="fas fa-power-off"></i><div><strong>1. Power:</strong> Press Power to turn the TV on or off.</div></li><li><i class="fas fa-home"></i><div><strong>2. Home / Smart Hub:</strong> The Home button opens the main screen with all apps (Netflix, YouTube, Cable TV...).</div></li><li><i class="fas fa-arrows-alt"></i><div><strong>3. Navigation / Arrows + OK/Select:</strong> Arrows to move through the menu, OK to select.</div></li><li><i class="fas fa-volume-up"></i><div><strong>4. Volume and Channels:</strong> Volume control (+/–) and channel change (CH +/–) for cable TV.</div></li><li><i class="fas fa-mobile-alt"></i><div><strong>5. Dedicated App Buttons:</strong> Quick buttons for popular apps (YouTube, Netflix).</div></li><li><i class="fas fa-undo"></i><div><strong>6. Back / Return:</strong> Allows you to go back or close a menu.</div></li><li><i class="fas fa-sign-in-alt"></i><div><strong>7. Source/Input:</strong> To switch to cable TV, HDMI, USB, or other external sources.</div></li><li><i class="fas fa-microphone"></i><div><strong>8. Voice / Microphone:</strong> Voice button: say for example “Open YouTube” or “Volume up”.</div></li></ul>`,
                guide_q_microwave: "Microwave",
                guide_a_microwave: `<p>The microwave is at your disposal. For a complete visual guide, we invite you to watch the video tutorial.</p><a href="https://www.amazon.it/vdp/87a8b589a9d24b2e8668e57809793580?product=B07K94YRJV&ref=cm_sw_cp_r_ib_dt_PY3inVXiQfeHr" target="_blank" rel="noopener noreferrer" class="btn btn-video btn-sm mt-2 mb-4 inline-flex items-center"><i class="fab fa-youtube"></i><span class="ml-2">Microwave Video Tutorial</span></a><h4 class="text-white font-semibold mt-4 mb-2">Main Functions:</h4><ul class="styled-list compact-list"><li><i class="fas fa-play"></i><div><strong>Power / Start:</strong> Starts cooking or adds 30 seconds with a single touch.</div></li><li><i class="fas fa-stop"></i><div><strong>Stop / Cancel:</strong> Stops or cancels the current cooking cycle.</div></li><li><i class="fas fa-clock"></i><div><strong>Time Selection:</strong> Use the number keys or +/- buttons to set minutes and seconds.</div></li><li><i class="fas fa-signal"></i><div><strong>Power Level:</strong> Adjusts the cooking intensity: High (100%), Medium, Low, or Defrost function.</div></li><li><i class="fas fa-utensils"></i><div><strong>AutoCook (Automatic Programs):</strong> Select one of the preset recipes for automatic cooking (e.g., pasta, rice, vegetables, meat, fish, desserts, etc.).</div></li><li><i class="fas fa-forward"></i><div><strong>Jet Start:</strong> Quick start at maximum power for 30 seconds—useful for rapid heating.</div></li><li><i class="fas fa-bacon"></i><div><strong>Grill Function:</strong> Activates the upper heating element to brown and gratinate food.</div></li><li><i class="fas fa-bread-slice"></i><div><strong>Dough Rising:</strong> Maintains the temperature at 30°C to help dough rise.</div></li><li><i class="fas fa-cheese"></i><div><strong>Yogurt Function:</strong> Ferments yogurt by keeping the internal temperature constant.</div></li><li><i class="fas fa-thermometer-three-quarters"></i><div><strong>Keep Warm Function:</strong> Keeps food warm until it's time to serve.</div></li></ul>`,
                guide_q_power_outage: "What to do in a power outage",
                guide_a_power_outage: `<a href="#" target="_blank" rel="noopener noreferrer" class="btn btn-video btn-sm mt-2 mb-4 inline-flex items-center"><i class="fas fa-play-circle"></i> Watch the explanatory video</a><p>⚡ Power outage? No problem! If this happens, in most cases it is a simple deactivation of one of the circuit breakers. We will guide you through a few simple steps to restore power on your own.</p><h4 class="text-white font-semibold mt-4 mb-2">Procedure:</h4><ul class="styled-list compact-list"><li><i class="fas fa-plug"></i><div><strong>1. Check the internal electrical panel:</strong> Stand with the apartment's front door behind you. Immediately to your right, you will find a small door: open it. Inside is the breaker box. If all the switches are up, pull them all down and then raise them one by one. If you notice one is down, just lift it up.</div></li><li><i class="fas fa-building"></i><div><strong>2. If the power doesn't come back on, go to the ground floor:</strong> Exit the apartment and go down to the ground floor. With the building's entrance door behind you, look immediately to your left. You will see a small door: this is for the meters of all the apartments. Open the door and locate the meter with the white label “ELEGANT LOFT”. Lower the lever and then raise it again.</div></li><li><i class="fas fa-bolt"></i><div><strong>3. Final step (if it still doesn't work):</strong> Once you open the meter closet door, look immediately to the left, not on the front wall. You will find a smaller, single meter, also identified by the ELEGANT LOFT label. Lower and raise this last lever as well.</div></li></ul>`,
                guide_q_washing_machine: "Washing Machine",
                guide_a_washing_machine: `<h4 class="text-white font-semibold mt-4 mb-2">Instructions for use:</h4><ul class="styled-list compact-list"><li><i class="fas fa-sign-in-alt"></i><div><strong>1. Load the clothes:</strong> Open the top lid and place the items evenly around the center. Do not exceed about 75% of the capacity to avoid imbalance.</div></li><li><i class="fas fa-soap"></i><div><strong>2. Add detergent:</strong> You can pour it directly into the drum or in the dispenser (if available on the model). Follow the amount suggested on the detergent packaging.</div></li><li><i class="fas fa-sliders-h"></i><div><strong>3. Select the program:</strong> Use the dial or touch buttons to choose from the available cycles: Cotton, Delicate/Silk, Eco, Hygiene/Anti-Allergy, Quick 14 min, Quick 30 °C, Synthetics, Wool.</div></li><li><i class="fas fa-temperature-high"></i><div><strong>4. Adjust the temperature (if available):</strong> Select hot or cold water based on the fabric labels.</div></li><li><i class="fas fa-play-circle"></i><div><strong>5. Start the wash:</strong> Press the Start/Pause button to begin the selected cycle.</div></li><li><i class="fas fa-water"></i><div><strong>6. Automatic drain:</strong> The machine automatically drains the water at the end of the cycle. Ensure the drain hose is positioned correctly (recommended height between 60-100 cm).</div></li><li><i class="fas fa-sync-alt"></i><div><strong>7. Final spin:</strong> After draining, the spin cycle automatically runs to remove residual moisture from the clothes.</div></li><li><i class="fas fa-hourglass-start"></i><div><strong>8. Delayed Start:</strong> If available, you can schedule the start up to 20 hours in advance using the Delayed Start function.</div></li><li><i class="fas fa-desktop"></i><div><strong>9. LED Display:</strong> The display shows the remaining time, the program in use, and any active options.</div></li><li><i class="fas fa-door-open"></i><div><strong>10. When finished:</strong> Leave the lid slightly open to allow the interior to dry.</div></li></ul>`,
                guide_q_kettle: "Kettle",
                guide_a_kettle: `<p>For a visual guide, we invite you to watch the video tutorial.</p><a href="https://www.amazon.it/vdp/1666909351e04693ba47f80fe4219255?product=B07NDCV4MV&ref=cm_sw_cp_r_ib_dt_pSxjApII8MZmF" target="_blank" rel="noopener noreferrer" class="btn btn-video btn-sm mt-2 mb-4 inline-flex items-center"><i class="fas fa-play-circle"></i><span class="ml-2">Watch the Video Tutorial</span></a><h4 class="text-white font-semibold mt-4 mb-2">Instructions for use:</h4><ul class="styled-list compact-list"><li><i class="fas fa-box-open"></i><div><strong>1. Open the lid:</strong> by pressing the button on the top handle.</div></li><li><i class="fas fa-tint"></i><div><strong>2. Fill with plain water:</strong> without exceeding the maximum level indicated.</div></li><li><i class="fas fa-plug"></i><div><strong>3. Close the lid tightly:</strong> and place the kettle on the electric base.</div></li><li><i class="fas fa-power-off"></i><div><strong>4. Press the power switch:</strong> the blue LED light will turn on. Wait a few minutes: the water will come to a boil.</div></li><li><i class="fas fa-check-circle"></i><div><strong>5. The kettle will turn off automatically</strong> when the water is ready.</div></li></ul>`,
                guide_q_contacts: "Useful Contacts",
                guide_a_contacts: `<h4 class="text-white font-semibold mb-2">National Emergency Numbers</h4><ul class="styled-list compact-list emergency-list mb-4"><li><i class="fas fa-exclamation-triangle"></i><div><strong>General Emergency:</strong> 112</div></li><li><i class="fas fa-ambulance"></i><div><strong>Ambulance:</strong> 118</div></li><li><i class="fas fa-fire-extinguisher"></i><div><strong>Fire Department:</strong> 115</div></li></ul><h4 class="text-white font-semibold mb-2">Our Emergency Contacts</h4><div class="border-b border-border-color-light pb-4 mb-4"><p class="font-semibold text-light">Moorent Pm</p><div class="flex gap-2 mt-2"><a href="tel:+393534830386" class="btn btn-secondary btn-sm flex-1 justify-center"><i class="fas fa-phone-alt"></i> Call</a><a href="https://wa.me/393534830386?text=Hello,%20I'm...%20from%20the%20Isola%20Verde%20apartment!%20I%20need%20your%20assistance" target="_blank" class="btn btn-success btn-sm flex-1 justify-center"><i class="fab fa-whatsapp"></i> WhatsApp</a></div></div><div class="border-b border-border-color-light pb-4 mb-4"><p class="font-semibold text-light">Beatrice</p><div class="flex gap-2 mt-2"><a href="tel:+393408894082" class="btn btn-secondary btn-sm flex-1 justify-center"><i class="fas fa-phone-alt"></i> Call</a><a href="https://wa.me/393408894082?text=Hello,%20I'm...%20from%20the%20Isola%20Verde%20apartment!%20I%20need%20your%20assistance" target="_blank" class="btn btn-success btn-sm flex-1 justify-center"><i class="fab fa-whatsapp"></i> WhatsApp</a></div></div><h4 class="text-white font-semibold mt-6 mb-2">Taxi</h4><p>Here you can insert local taxi numbers.</p>`,
                // Goodbye Page
                goodbye_title_new: "Goodbye and Thank You!",
                goodbye_p1_new: "We hope your stay in our loft was unforgettable and that you fell in love with Padua.",
                goodbye_p2_new: "Your feedback is invaluable to us. It helps us grow and offer an even better experience. If you have a moment, we would be immensely grateful if you could leave us a review.",
                goodbye_btn_review: "Leave a Review",
                goodbye_discount_title: "A Special Thanks for You",
                goodbye_discount_p1: "To thank you for choosing us, we want to offer you a <strong>5%</strong> discount code for your next direct booking.",
                goodbye_discount_p2: "Furthermore, for those who help us shine with exceptional feedback, the loyalty discount <strong>increases to 15%</strong>! It's our way of saying thank you to those who rate us with the highest score in every category.",
                goodbye_btn_book: "Book Your Next Stay",
                goodbye_btn_pm: "Contact us on WhatsApp",
                goodbye_pm_whatsapp_link: "https://wa.me/393534830386?text=Hello,%20I%20am%20a%20property%20owner%20and%20I%20would%20be%20interested%20in%20your%20Property%20Management%20services.%20Could%20you%20give%20me%20some%20more%20information%3F%20Thank%20you!",
                 // Gemini Features
                gemini_tip_title: "✨ A Tip For You",
                gemini_tip_desc: "Every day we ask a local expert for a special tip for your day in Padova. Discover today's!",
                gemini_itinerary_title: "✨ Create Your Ideal Itinerary",
                gemini_itinerary_desc: "We are here to help you create a unique experience. Tell us what you're passionate about and for how many days you're staying, and we'll prepare a custom itinerary for you to discover the best of Padova.",
                gemini_itinerary_interests_label: "Your interests",
                gemini_itinerary_days_label: "Number of days",
                gemini_itinerary_btn_generate: "Prepare my Itinerary",
                gemini_itinerary_loading: "Creating your personalized itinerary...",
                gemini_itinerary_day_1: "1 Day",
                gemini_itinerary_day_2: "2 Days",
                gemini_itinerary_day_3: "3 Days",
                gemini_itinerary_day_4: "4 Days",
                gemini_itinerary_day_5: "5 Days",
                gemini_api_error: "Oops! Something went wrong. Please try again later.",
                
                // NUOVE CHIAVI PER PROPERTY MANAGEMENT
                goodbye_pm_title: "Are You a Homeowner?",
                goodbye_pm_p1: "Managing a property can be complex. We offer a complete property management service to maximize your earnings and free you from all worries.",
                goodbye_pm_p2: "From booking management to maintenance, we take care of everything.",

                // Chatbot - Operator
                chatbot_operator_msg: "Of course. To speak directly with an operator, click the button below to start a WhatsApp chat.",
                chatbot_operator_btn: "Contact Operator",
                whatsapp_prefilled_message: "Hello, I'm a guest at the Elegant Loft in Padua and I need assistance.",

            }
        };

        // --- Variabili Globali e Setup ---
        const markdownConverter = new showdown.Converter(); // Istanza per convertire Markdown in HTML

        // --- Funzioni per chiamate API Gemini ---
        const API_KEY = "AIzaSyAJfqNwBiGQTE3XAej1sAvd_hgambfIxE0"; // La chiave API viene fornita automaticamente dall'ambiente Canvas

        /**
         * Funzione generica per chiamare l'API Gemini.
         * @param {string} prompt - Il prompt da inviare al modello.
         * @returns {Promise<string|null>} Il testo generato o null in caso di errore.
         */
        async function callGemini(prompt) {
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${API_KEY}`;
            const payload = {
                contents: [{
                    role: "user",
                    parts: [{ text: prompt }]
                }]
            };

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    console.error("API Error Response:", errorData);
                    const lang = currentLanguage || 'it';
                    return translations[lang].gemini_api_error;
                }

                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    return result.candidates[0].content.parts[0].text;
                } else {
                    console.error("Invalid API response structure:", result);
                    const lang = currentLanguage || 'it';
                    return translations[lang].gemini_api_error;
                }
            } catch (error) {
                console.error("Fetch Error:", error);
                const lang = currentLanguage || 'it';
                return translations[lang].gemini_api_error;
            }
        }

        /**
         * Genera e visualizza l'itinerario personalizzato.
         */
        async function generateItinerary() {
            const interests = document.getElementById('itinerary-interests').value.trim();
            const days = document.getElementById('itinerary-days').value;
            const resultContainer = document.getElementById('itinerary-result');
            const loader = document.getElementById('itinerary-loader');
            const generateBtn = document.getElementById('generate-itinerary-btn');

            if (!interests) {
                showMessage(translations[currentLanguage].gemini_itinerary_interests_label + " " + (translations[currentLanguage].is_required || "is required"), 'warning');
                return;
            }

            loader.classList.remove('hidden');
            resultContainer.classList.add('hidden');
            generateBtn.disabled = true;

            const promptLang = currentLanguage === 'en' ? 'English' : 'Italian';
            const prompt = `Sei una guida turistica esperta di Padova e dei suoi dintorni. Crea un itinerario dettagliato e personalizzato per un turista.
- Durata: ${days} giorni
- Interessi: ${interests}
- La risposta DEVE essere in ${promptLang}.
- La risposta DEVE essere formattata in Markdown, con titoli per ogni giorno e liste puntate per le attività.
- Includi suggerimenti per colazione, pranzo e cena con una breve descrizione del locale.
- Sii creativo e suggerisci almeno una "gemma nascosta" o un'esperienza locale meno conosciuta.
- Inizia con un titolo accattivante per l'itinerario.`;

            const itineraryText = await callGemini(prompt);

            loader.classList.add('hidden');
            generateBtn.disabled = false;

            if (itineraryText) {
                const htmlContent = markdownConverter.makeHtml(itineraryText);
                resultContainer.innerHTML = htmlContent;
                resultContainer.classList.remove('hidden');
            } else {
                resultContainer.innerHTML = `<p class="text-red-500">${translations[currentLanguage].gemini_api_error || "Oops! Qualcosa è andato storto. Riprova più tardi."}</p>`;
                resultContainer.classList.remove('hidden');
            }
        }
        
        /**
         * Genera e visualizza il consiglio del giorno.
         */
        async function getDailyTip() {
            const tipContainer = document.getElementById('daily-tip-container');
            const loader = document.getElementById('daily-tip-loader');
            
            loader.classList.remove('hidden');
            tipContainer.classList.add('hidden');
            
            const promptLang = currentLanguage === 'en' ? 'English' : 'Italian';
            const prompt = `Sei un amichevole esperto locale di Padova. Dammi un consiglio del giorno unico, interessante e pratico per un turista che visita Padova oggi. Il consiglio deve essere conciso (2-3 frasi). Potrebbe riguardare un evento speciale, un cibo da provare (come lo spritz), un bel posto per le foto o una curiosità sulla vita universitaria. La risposta DEVE essere in ${promptLang}. Non usare formattazione Markdown, solo testo semplice.`;
            
            const tipText = await callGemini(prompt);
            
            loader.classList.add('hidden');
            
            if(tipText) {
                tipContainer.innerHTML = `<p class="text-light italic">"${tipText}"</p>`;
                tipContainer.classList.remove('hidden');
            } else {
                console.error("Impossibile caricare il consiglio del giorno.");
                tipContainer.innerHTML = `<p class="text-red-500">${translations[currentLanguage].gemini_api_error || "Oops! Qualcosa è andato storto. Riprova più tardi."}</p>`;
                tipContainer.classList.remove('hidden');
            }
        }

        // --- Logica Navigazione Pagine & Lingua con History API ---
        // Dichiarazione variabili (inizializzate dopo il caricamento del DOM)
        let pages, backButton, homePageId, currentLanguage;

        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        };

        function applyTranslations(lang) {
            const elements = document.querySelectorAll('[data-translate-key]');
            elements.forEach(el => {
                const key = el.dataset.translateKey;
                const translation = translations[lang]?.[key];
                if (translation !== undefined) {
                    const containsHtmlTags = /<strong>|<\/strong>|<br>|<p>|<\/p>|<ul>|<\/ul>|<li>|<\/li>|<a\s.*?>|<\/a>/.test(translation);
                    if (containsHtmlTags) {
                        el.innerHTML = translation;
                    } else {
                        el.textContent = translation;
                    }
                }
            });
             const activePage = document.querySelector('.page.active');
             if (activePage) {
                let pageKey = activePage.id;
                // Gestisce casi speciali per chiavi di traduzione del titolo
                if(pageKey === "come_arrivare") pageKey = "directions";
                if(pageKey === "arrivare_treno") pageKey = "train_directions";
                if(pageKey === "arrivare_macchina") pageKey = "car_directions";
                if(pageKey === "benvenuto") pageKey = "welcome";
                if(pageKey === "arrivederci") pageKey = "goodbye";
                if(pageKey === "guida_casa") pageKey = "guide";
                if(pageKey === "regole") pageKey = "rules";
                if(pageKey === "posti") pageKey = "places";
                if(pageKey === "convenzioni") pageKey = "deals";

                const titleKey = `page_title_${pageKey.replace(/_hub|_new/g, '')}`;
                document.title = "Welcome Book - " + (translations[lang]?.[titleKey] || 'Welcome');
             } else {
                 document.title = 'Welcome Book';
             }
             document.querySelectorAll('.lang-btn').forEach(btn => {
                 btn.classList.toggle('active', btn.id === `lang-${lang}`);
             });
             document.documentElement.lang = lang;
             
             const pmWhatsappLink = document.getElementById('pm-whatsapp-link');
            if (pmWhatsappLink) {
                pmWhatsappLink.href = translations[lang]?.goodbye_pm_whatsapp_link || '#';
            }
        }

        function setLanguage(lang) {
            if (translations[lang]) {
                currentLanguage = lang;
                localStorage.setItem('selectedLanguage', lang);
                applyTranslations(lang);
                 if (document.getElementById('checkin')?.classList.contains('active')) {
                     initializeCheckinSteps();
                 }
            }
        }

        function showPage(pageId, fromHistory = false) {
            const targetPage = document.getElementById(pageId);
        
            if (!targetPage) {
                console.error(`Page with ID "${pageId}" not found. Showing home.`);
                showPage(homePageId, fromHistory);
                return;
            }
        
            pages.forEach(p => {
                p.classList.remove('active');
                p.style.display = 'none'; // Nascondi esplicitamente tutte le pagine
            });
        
            targetPage.style.display = 'block'; // Mostra la pagina target
        
            // Forza il reflow del browser prima di aggiungere la classe per l'animazione
            void targetPage.offsetWidth; 
        
            targetPage.classList.add('active');
        
            const isHome = (pageId === homePageId);
            backButton.style.display = isHome ? 'none' : 'inline-block';
            
            if (!fromHistory) {
                const newUrl = '#' + pageId;
                if (window.location.hash !== newUrl) {
                    history.pushState({ pageId: pageId }, '', newUrl);
                }
            }
        
            applyTranslations(currentLanguage);
            
            if (pageId === 'benvenuto') getDailyTip();
            if (pageId === 'checkin') initializeCheckinSteps();
        
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        window.addEventListener('popstate', (event) => {
            if (event.state && event.state.pageId) {
                showPage(event.state.pageId, true);
            } else {
                const pageIdFromHash = window.location.hash.substring(1);
                showPage(pageIdFromHash || homePageId, true);
            }
        });

        backButton.addEventListener('click', () => {
            history.back();
        });

        // --- Logica Step Check-in ---
        let currentCheckinStep = 1;
        let totalCheckinSteps = 0;
        const checkinStepsContainer = document.getElementById('checkin-steps-container');
        const checkinStepIndicator = document.getElementById('checkin-step-indicator');
        const checkinPrevButton = document.getElementById('checkin-prev');
        const checkinNextButton = document.getElementById('checkin-next');
        let checkinStepElements = [];

        function initializeCheckinSteps() {
            if (!checkinStepsContainer || !checkinStepIndicator) return;
            checkinStepElements = Array.from(checkinStepsContainer.querySelectorAll('.step-content'));
            totalCheckinSteps = checkinStepElements.length;
            checkinStepIndicator.innerHTML = '';

            if(totalCheckinSteps > 0) {
                for (let i = 1; i <= totalCheckinSteps; i++) {
                    const dot = document.createElement('div');
                    dot.classList.add('step-dot');
                    checkinStepIndicator.appendChild(dot);
                }
                currentCheckinStep = 1;
                updateCheckinStepView();
            }
        }
        function updateCheckinStepView() {
             if (!checkinStepElements || checkinStepElements.length === 0) return;
             checkinStepElements.forEach((step, index) => {
                 step.classList.toggle('active', (index + 1) === currentCheckinStep);
             });
             const dots = checkinStepIndicator.querySelectorAll('.step-dot');
             dots.forEach((dot, index) => {
                 dot.classList.toggle('active', (index + 1) === currentCheckinStep);
             });
            updateCheckinStepButtons();
        }
         function updateCheckinStepButtons() {
             if(checkinPrevButton && checkinNextButton) {
                 checkinPrevButton.disabled = currentCheckinStep === 1;
                 checkinNextButton.disabled = currentCheckinStep === totalCheckinSteps;
             }
         }
        function navigateCheckinSteps(direction) {
            const newStep = currentCheckinStep + direction;
            if (newStep >= 1 && newStep <= totalCheckinSteps) {
                currentCheckinStep = newStep;
                updateCheckinStepView();
            }
        }

        // --- Funzioni Utilità ---
        const messageBox = document.getElementById('messageBox');
        let messageTimeout;

        function showMessage(textKey, type = 'info', duration = 2500) {
             if (!messageBox) return;
             clearTimeout(messageTimeout);
             messageBox.textContent = translations[currentLanguage]?.[textKey] || textKey;
             messageBox.className = 'show';
             if (type === 'success') { messageBox.classList.add('success'); }
             messageTimeout = setTimeout(() => {
                 messageBox.classList.remove('show', 'success');
             }, duration);
        }

        function copyToClipboard(text, buttonElement) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            
            // Make the textarea invisible
            textArea.style.position = 'fixed';
            textArea.style.top = 0;
            textArea.style.left = 0;
            textArea.style.width = '2em';
            textArea.style.height = '2em';
            textArea.style.padding = 0;
            textArea.style.border = 'none';
            textArea.style.outline = 'none';
            textArea.style.boxShadow = 'none';
            textArea.style.background = 'transparent';

            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();

            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    showMessage('copied_success', 'success');
                    const originalContent = buttonElement.innerHTML;
                    buttonElement.innerHTML = `<i class="fas fa-check"></i>`;
                    buttonElement.classList.add('btn-success');
                    buttonElement.classList.remove('btn-secondary');
                     setTimeout(() => {
                         buttonElement.innerHTML = originalContent;
                         buttonElement.className = buttonElement.className.replace('btn-success', 'btn-secondary');
                     }, 2000);
                } else {
                    console.error('Fallback: Copying text command was unsuccessful');
                    showMessage('copy_error', 'error');
                }
            } catch (err) {
                console.error('Fallback: Oops, unable to copy', err);
                showMessage('copy_error', 'error');
            }

            document.body.removeChild(textArea);
        }

        async function downloadCoupon(dealName) {
            showMessage('download_started', 'info');

            // URL dei coupon per ogni convenzione e lingua
            const allCouponUrls = {
                graziati: {
                    it: 'https://i.postimg.cc/fTVTWYP6/ITA-VOUCHER-MOORENT-PADOVA-1.png',
                    en: 'https://i.postimg.cc/VvVfBNJG/ING-VOUCHER-MOORENT-Padova-2.png'
                },
                crystal: {
                    it: 'https://i.postimg.cc/1z0JkL9H/ITA-VOUCHER-MOORENT-cristal-boutique.png', // URL Coupon Cristal IT
                    en: 'https://i.postimg.cc/wxrcG6Xz/ING-VOUCHER-MOORENT-cristal-boutique.png'  // URL Coupon Cristal EN
                }
            };
            
            const url = allCouponUrls[dealName]?.[currentLanguage];
            
            if (!url) {
                console.error(`URL del coupon non trovato per la convenzione "${dealName}" e la lingua "${currentLanguage}".`);
                showMessage('download_failed', 'error');
                return;
            }

            try {
                // Scarica l'immagine come dati
                const response = await fetch(url);
                if (!response.ok) throw new Error('Network response was not ok.');
                const blob = await response.blob();

                // Crea un URL temporaneo per i dati scaricati
                const objectUrl = window.URL.createObjectURL(blob);

                // Crea un link invisibile per avviare il download
                const link = document.createElement('a');
                link.href = objectUrl;
                link.setAttribute('download', `coupon-${dealName}.png`); // Nome del file personalizzato
                document.body.appendChild(link);
                link.click();
                
                // Pulisce dopo il download
                link.remove();
                window.URL.revokeObjectURL(objectUrl);

            } catch (error) {
                console.error('Download fallito:', error);
                showMessage('download_failed', 'error');
                // Se il download automatico fallisce, apre l'immagine in una nuova scheda
                window.open(url, '_blank');
            }
        }

        // --- Inizializzazione al Caricamento della Pagina ---
        document.addEventListener('DOMContentLoaded', () => {
            // --- Inizializzazione App Principale ---
            try {
                // Inizializza variabili DOM
                pages = document.querySelectorAll('.page');
                backButton = document.getElementById('backButton');
                homePageId = 'home';
                currentLanguage = 'it';

                // Calcola altezza header
                const header = document.querySelector('.fixed-header');
                if (header) {
                    const headerHeight = header.offsetHeight;
                    document.documentElement.style.setProperty('--nav-height-actual', `${headerHeight}px`);
                }

                // Imposta lingua
                const savedLang = localStorage.getItem('selectedLanguage');
                const initialLang = translations[savedLang] ? savedLang : 'it';
                setLanguage(initialLang);

                // Logica di caricamento pagina iniziale basata sull'URL hash
                const initialPageId = window.location.hash.substring(1);
                const pageExists = document.getElementById(initialPageId);
                
                if (initialPageId && pageExists) {
                    showPage(initialPageId, true);
                } else {
                    showPage(homePageId, true);
                    history.replaceState({ pageId: homePageId }, '', '#'+homePageId);
                }

                // Collega event listener per generazione itinerario
                document.getElementById('generate-itinerary-btn')?.addEventListener('click', generateItinerary);

                // Aggiunge rel="noopener noreferrer" ai link esterni
                document.querySelectorAll('a[target="_blank"]').forEach(link => {
                     link.rel = 'noopener noreferrer';
                });

                console.log("App Initialized Successfully.");
            } catch (error) {
                console.error("Error during app initialization:", error);
            }

            // --- Script per lo sfondo animato ---
            try {
                const storyCanvas = document.getElementById('storyWavesBg');
                if (storyCanvas) {
                    const storyCtx = storyCanvas.getContext('2d');

                    function resizeStoryCanvas() {
                        const ratio = window.devicePixelRatio || 1;
                        storyCanvas.width = window.innerWidth * ratio;
                        storyCanvas.height = window.innerHeight * ratio;
                        storyCanvas.style.width = window.innerWidth + 'px';
                        storyCanvas.style.height = window.innerHeight + 'px';
                        storyCtx.scale(ratio, ratio);
                        createStoryWaves();
                    }

                    const lineColor = '#d6c4bf';

                    class StoryWaveLine {
                        constructor(options) {
                            this.x = 0;
                            this.y = options.y || Math.random() * window.innerHeight;
                            this.amplitude = options.amplitude || (30 + Math.random() * 80);
                            this.wavelength = options.wavelength || (100 + Math.random() * 300);
                            this.frequency = Math.PI * 2 / this.wavelength;
                            this.phase = options.phase || Math.random() * Math.PI * 2;
                            this.lineWidth = options.lineWidth || (0.05 + Math.random() * 0.2); // Linee più sottili
                            this.speed = options.speed || (0.002 + Math.random() * 0.008);
                            this.opacity = options.opacity || (0.1 + Math.random() * 0.3);
                            this.segments = [];
                            this.segmentLength = 2;

                            for (let x = 0; x < window.innerWidth + this.segmentLength; x += this.segmentLength) {
                                this.segments.push({
                                    x: x,
                                    y: this.y + Math.sin(this.frequency * x + this.phase) * this.amplitude
                                });
                            }
                        }

                        update() {
                            this.phase += this.speed;
                            for (let i = 0; i < this.segments.length; i++) {
                                this.segments[i].y = this.y + Math.sin(this.frequency * this.segments[i].x + this.phase) * this.amplitude;
                            }
                        }

                        draw() {
                            storyCtx.beginPath();
                            storyCtx.strokeStyle = lineColor;
                            storyCtx.lineWidth = this.lineWidth;
                            storyCtx.globalAlpha = this.opacity;

                            storyCtx.moveTo(this.segments[0].x, this.segments[0].y);

                            for (let i = 1; i < this.segments.length; i++) {
                                storyCtx.lineTo(this.segments[i].x, this.segments[i].y);
                            }

                            storyCtx.stroke();
                            storyCtx.globalAlpha = 1;
                        }
                    }

                    let storyWaveGroups = [];

                    function createStoryWaves() {
                        storyWaveGroups = [];
                        const waveCount = window.innerWidth < 768 ? 18 : 35; // Meno onde su mobile
                        // Primo gruppo - parte alta del canvas
                        for (let i = 0; i < waveCount / 3; i++) {
                            storyWaveGroups.push(new StoryWaveLine({
                                y: window.innerHeight * 0.2 + i * 15,
                                amplitude: 20 + i * 1.5,
                                wavelength: 1200 + i * 10,
                                phase: i * 0.2,
                                speed: 0.002
                            }));
                        }
                        // Secondo gruppo - parte centrale del canvas
                        for (let i = 0; i < waveCount / 2; i++) {
                            storyWaveGroups.push(new StoryWaveLine({
                                y: window.innerHeight * 0.5 + i * 12,
                                amplitude: 25 - i * 0.5,
                                wavelength: 800 + i * 50,
                                phase: i * 0.1 + Math.PI,
                                speed: 0.003
                            }));
                        }
                        // Terzo gruppo - parte bassa del canvas
                        for (let i = 0; i < waveCount / 3; i++) {
                            storyWaveGroups.push(new StoryWaveLine({
                                y: window.innerHeight * 0.8 + i * 15,
                                amplitude: 20 + i * 1,
                                wavelength: 1000 - i * 20,
                                phase: i * 0.15 + Math.PI / 2,
                                speed: 0.0015
                            }));
                        }
                    }


                    resizeStoryCanvas();
                    window.addEventListener('resize', debounce(resizeStoryCanvas, 250));

                    function animateStoryWaves() {
                        storyCtx.clearRect(0, 0, storyCanvas.width, storyCanvas.height);
                        storyWaveGroups.forEach(wave => {
                            wave.update();
                            wave.draw();
                        });
                        requestAnimationFrame(animateStoryWaves);
                    }

                    animateStoryWaves();
                }
            } catch (error) {
                console.error("Error during animation setup:", error);
            }
            
            // ======================================================
            // INIZIO LOGICA JAVASCRIPT DEL CHATBOT
            // ======================================================

            // ======================================================
            // FINE LOGICA JAVASCRIPT DEL CHATBOT
            // ======================================================


        });
    </script>
</body>
</html>
